import{G as Fe,S as ve,i as we,s as be,d as O,v as xe,ab as ne,a1 as oe,e as w,W as C,b as A,g as b,h as k,X as V,j as p,k as T,N as I,m as x,n as M,Q as f,Y as z,u as D,x as Re,H as Y,a2 as ye,F as Ee,_ as ke,am as Ge,$ as ce,a0 as Le,f as te,K as ze,r as F,t as L,q as Ie,J as re,L as se,O as ie,R as ae,a7 as Se,p as De,a8 as Je,M as ue,Z as Pe,a6 as Ke,a9 as Qe,aa as We}from"../chunks/vendor.sC5Dcwro.js";import{n as Xe,B as _e}from"../chunks/graphql.fqwMiF4t.js";import{l as Ye}from"../chunks/gql.WZvlfNZ8.js";import{p as de}from"../chunks/formatting.aC8Iiv-5.js";import{u as le}from"../chunks/user.Qhcc6Pum.js";import{m as fe}from"../chunks/markdown.bNoD0QZu.js";import{M as Oe}from"../chunks/MetaDescriptors.m-kXAXKS.js";import{P as Be}from"../chunks/Page404.SIlVxkQW.js";const Ze=!1,et=async({params:t,parent:e})=>({...t,...await Ye({guide:Fe({query:Xe,client:(await e()).client,variables:{guide:t.guideId}})})}),ft=Object.freeze(Object.defineProperty({__proto__:null,load:et,prerender:Ze},Symbol.toStringTag,{value:"Module"})),X="src/lib/components/guides/GuideInfo.svelte";function he(t){let e,s,n,o,r=t[2]("entry.info")+"",a,i,l,c,m=t[2]("entry.created-at")+"",u,v,d,h=de(t[0].created_at)+"",$,S;const B={c:function(){e=w("div"),s=w("section"),n=w("div"),o=w("h3"),a=C(r),i=A(),l=w("span"),c=w("strong"),u=C(m),v=C(":"),d=A(),$=C(h),S=w("br"),this.h()},l:function(g){e=b(g,"DIV",{class:!0});var y=k(e);s=b(y,"SECTION",{});var P=k(s);n=b(P,"DIV",{class:!0});var N=k(n);o=b(N,"H3",{class:!0});var j=k(o);a=V(j,r),j.forEach(p),i=T(N),l=b(N,"SPAN",{});var E=k(l);c=b(E,"STRONG",{});var G=k(c);u=V(G,m),v=V(G,":"),G.forEach(p),d=T(E),$=V(E,h),E.forEach(p),S=b(N,"BR",{}),N.forEach(p),P.forEach(p),y.forEach(p),this.h()},h:function(){I(o,"class","my-4 text-2xl font-bold"),x(o,X,13,6,250),x(c,X,14,12,322),x(l,X,14,6,316),x(S,X,14,92,402),I(n,"class","text-lg"),x(n,X,12,4,222),x(s,X,11,2,208),I(e,"class","card p-4"),x(e,X,10,0,183)},m:function(g,y){M(g,e,y),f(e,s),f(s,n),f(n,o),f(o,a),f(n,i),f(n,l),f(l,c),f(c,u),f(c,v),f(l,d),f(l,$),f(n,S)},p:function(g,[y]){y&4&&r!==(r=g[2]("entry.info")+"")&&z(a,r),y&4&&m!==(m=g[2]("entry.created-at")+"")&&z(u,m),y&1&&h!==(h=de(g[0].created_at)+"")&&z($,h)},i:D,o:D,d:function(g){g&&p(e)}};return O("SvelteRegisterBlock",{block:B,id:he.name,type:"component",source:"",ctx:t}),B}function tt(t,e,s){let n,o=D,r=()=>(o(),o=Re(c,u=>s(2,n=u)),c);t.$$.on_destroy.push(()=>o());let{$$slots:a={},$$scope:i}=e;xe("GuideInfo",a,[]);let{guide:l}=e;const{t:c}=ne();oe(c,"t"),r(),t.$$.on_mount.push(function(){l===void 0&&!("guide"in e||t.$$.bound[t.$$.props.guide])&&console.warn("<GuideInfo> was created without expected prop 'guide'")});const m=["guide"];return Object.keys(e).forEach(u=>{!~m.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&console.warn(`<GuideInfo> was created with unknown prop '${u}'`)}),t.$$set=u=>{"guide"in u&&s(0,l=u.guide)},t.$capture_state=()=>({prettyDate:de,getTranslate:ne,guide:l,t:c,$t:n}),t.$inject_state=u=>{"guide"in u&&s(0,l=u.guide)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),[l,c,n]}class Ce extends ve{constructor(e){super(e),we(this,e,tt,he,be,{guide:0,t:1}),O("SvelteRegisterComponent",{component:this,tagName:"GuideInfo",options:e,id:he.name})}get guide(){throw new Error("<GuideInfo>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set guide(e){throw new Error("<GuideInfo>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get t(){return this.$$.ctx[1]}set t(e){throw new Error("<GuideInfo>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const q="src/lib/components/guides/GuideAuthor.svelte";function ge(t){let e,s,n,o,r=t[2]("author")+"",a,i,l,c,m,u,v,d,h,$=t[0].username+"",S,B,_,g,y=t[2]("role.writer")+"",P;const N={c:function(){e=w("div"),s=w("section"),n=w("div"),o=w("h3"),a=C(r),i=A(),l=w("div"),c=w("div"),m=w("div"),v=A(),d=w("div"),h=w("a"),S=C($),_=A(),g=w("div"),P=C(y),this.h()},l:function(E){e=b(E,"DIV",{class:!0});var G=k(e);s=b(G,"SECTION",{});var U=k(s);n=b(U,"DIV",{class:!0});var H=k(n);o=b(H,"H3",{class:!0});var Z=k(o);a=V(Z,r),Z.forEach(p),i=T(H),l=b(H,"DIV",{class:!0});var J=k(l);c=b(J,"DIV",{class:!0});var K=k(c);m=b(K,"DIV",{class:!0,style:!0}),k(m).forEach(p),v=T(K),d=b(K,"DIV",{class:!0});var Q=k(d);h=b(Q,"A",{href:!0,class:!0});var ee=k(h);S=V(ee,$),ee.forEach(p),_=T(Q),g=b(Q,"DIV",{});var W=k(g);P=V(W,y),W.forEach(p),Q.forEach(p),K.forEach(p),J.forEach(p),H.forEach(p),U.forEach(p),G.forEach(p),this.h()},h:function(){I(o,"class","my-4 text-2xl font-bold"),x(o,q,13,6,253),I(m,"class","h-14 w-14 rounded-full bg-cover"),I(m,"style",u=`background-image: url("${t[0].avatar}")`),x(m,q,17,10,438),I(h,"href",B=Y+"/user/"+t[0].id+"/"),I(h,"class","text-yellow-500 underline"),x(h,q,19,12,593),x(g,q,20,12,696),I(d,"class","grid grid-flow-row"),x(d,q,18,10,548),I(c,"class","grid auto-cols-min grid-flow-col gap-x-4"),x(c,q,16,8,373),I(l,"class","grid auto-rows-min gap-y-4 text-lg"),x(l,q,15,6,316),I(n,"class","grid grid-flow-row gap-y-2"),x(n,q,12,4,206),x(s,q,11,2,192),I(e,"class","card p-4"),x(e,q,10,0,167)},m:function(E,G){M(E,e,G),f(e,s),f(s,n),f(n,o),f(o,a),f(n,i),f(n,l),f(l,c),f(c,m),f(c,v),f(c,d),f(d,h),f(h,S),f(d,_),f(d,g),f(g,P)},p:function(E,[G]){G&4&&r!==(r=E[2]("author")+"")&&z(a,r),G&1&&u!==(u=`background-image: url("${E[0].avatar}")`)&&I(m,"style",u),G&1&&$!==($=E[0].username+"")&&z(S,$),G&1&&B!==(B=Y+"/user/"+E[0].id+"/")&&I(h,"href",B),G&4&&y!==(y=E[2]("role.writer")+"")&&z(P,y)},i:D,o:D,d:function(E){E&&p(e)}};return O("SvelteRegisterBlock",{block:N,id:ge.name,type:"component",source:"",ctx:t}),N}function nt(t,e,s){let n,o=D,r=()=>(o(),o=Re(c,u=>s(2,n=u)),c);t.$$.on_destroy.push(()=>o());let{$$slots:a={},$$scope:i}=e;xe("GuideAuthor",a,[]);let{author:l}=e;const{t:c}=ne();oe(c,"t"),r(),t.$$.on_mount.push(function(){l===void 0&&!("author"in e||t.$$.bound[t.$$.props.author])&&console.warn("<GuideAuthor> was created without expected prop 'author'")});const m=["author"];return Object.keys(e).forEach(u=>{!~m.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&console.warn(`<GuideAuthor> was created with unknown prop '${u}'`)}),t.$$set=u=>{"author"in u&&s(0,l=u.author)},t.$capture_state=()=>({base:Y,getTranslate:ne,author:l,t:c,$t:n}),t.$inject_state=u=>{"author"in u&&s(0,l=u.author)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),[l,c,n]}class Ve extends ve{constructor(e){super(e),we(this,e,nt,ge,be,{author:0,t:1}),O("SvelteRegisterComponent",{component:this,tagName:"GuideAuthor",options:e,id:ge.name})}get author(){throw new Error("<GuideAuthor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set author(e){throw new Error("<GuideAuthor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get t(){return this.$$.ctx[1]}set t(e){throw new Error("<GuideAuthor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:je}=Le,R="src/routes/guide/[guideId]/+page.svelte";function pe(t){let e,s;e=new Oe({props:{description:t[0].data.getGuide.short_description,title:t[0].data.getGuide.name},$$inline:!0});const n={c:function(){re(e.$$.fragment)},l:function(r){se(e.$$.fragment,r)},m:function(r,a){ie(e,r,a),s=!0},p:function(r,a){const i={};a&1&&(i.description=r[0].data.getGuide.short_description),a&1&&(i.title=r[0].data.getGuide.name),e.$set(i)},i:function(r){s||(F(e.$$.fragment,r),s=!0)},o:function(r){L(e.$$.fragment,r),s=!1},d:function(r){ae(e,r)}};return O("SvelteRegisterBlock",{block:n,id:pe.name,type:"if",source:"(54:2) {#if !$guide.fetching && !$guide.error && $guide.data.getGuide}",ctx:t}),n}function Ne(t){let e,s;e=new Be({$$inline:!0});const n={c:function(){re(e.$$.fragment)},l:function(r){se(e.$$.fragment,r)},m:function(r,a){ie(e,r,a),s=!0},p:D,i:function(r){s||(F(e.$$.fragment,r),s=!0)},o:function(r){L(e.$$.fragment,r),s=!1},d:function(r){ae(e,r)}};return O("SvelteRegisterBlock",{block:n,id:Ne.name,type:"else",source:"(96:0) {:else}",ctx:t}),n}function Ae(t){let e,s,n,o=t[0].data.getGuide.name+"",r,a,i,l,c,m,u,v,d,h,$,S,B,_,g,y=t[1]&&me(t),P={ctx:t,current:null,token:null,hasCatch:!1,pending:qe,then:He,catch:Ue,value:13};Se(d=fe(t[0].data.getGuide.guide),P),S=new Ce({props:{guide:t[0].data.getGuide},$$inline:!0}),_=new Ve({props:{author:t[0].data.getGuide.user},$$inline:!0});const N={c:function(){e=w("div"),s=w("div"),n=w("h1"),r=C(o),a=A(),i=w("div"),y&&y.c(),l=A(),c=w("div"),m=w("div"),u=w("section"),v=w("div"),P.block.c(),h=A(),$=w("div"),re(S.$$.fragment),B=A(),re(_.$$.fragment),this.h()},l:function(E){e=b(E,"DIV",{class:!0});var G=k(e);s=b(G,"DIV",{class:!0});var U=k(s);n=b(U,"H1",{class:!0});var H=k(n);r=V(H,o),H.forEach(p),a=T(U),i=b(U,"DIV",{});var Z=k(i);y&&y.l(Z),Z.forEach(p),U.forEach(p),l=T(G),c=b(G,"DIV",{class:!0});var J=k(c);m=b(J,"DIV",{class:!0});var K=k(m);u=b(K,"SECTION",{});var Q=k(u);v=b(Q,"DIV",{class:!0});var ee=k(v);P.block.l(ee),ee.forEach(p),Q.forEach(p),K.forEach(p),h=T(J),$=b(J,"DIV",{class:!0});var W=k($);se(S.$$.fragment,W),B=T(W),se(_.$$.fragment,W),W.forEach(p),J.forEach(p),G.forEach(p),this.h()},h:function(){I(n,"class","text-4xl font-bold"),x(n,R,74,6,2261),x(i,R,76,6,2332),I(s,"class","flex h-auto flex-wrap items-center justify-between"),x(s,R,73,4,2190),I(v,"class","markdown-content break-words"),x(v,R,90,10,2908),x(u,R,89,8,2888),I(m,"class","card h-fit p-4"),x(m,R,88,6,2851),I($,"class","grid auto-rows-min grid-cols-1 gap-8"),x($,R,98,6,3185),I(c,"class","grid-auto-max grid auto-cols-fr gap-4"),x(c,R,87,4,2793),I(e,"class","grid gap-6 xlx:grid-flow-row"),x(e,R,72,2,2143)},m:function(E,G){M(E,e,G),f(e,s),f(s,n),f(n,r),f(s,a),f(s,i),y&&y.m(i,null),f(e,l),f(e,c),f(c,m),f(m,u),f(u,v),P.block.m(v,P.anchor=null),P.mount=()=>v,P.anchor=null,f(c,h),f(c,$),ie(S,$,null),f($,B),ie(_,$,null),g=!0},p:function(E,G){t=E,(!g||G&1)&&o!==(o=t[0].data.getGuide.name+"")&&z(r,o),t[1]?y?y.p(t,G):(y=me(t),y.c(),y.m(i,null)):y&&(y.d(1),y=null),P.ctx=t,G&1&&d!==(d=fe(t[0].data.getGuide.guide))&&Se(d,P)||Je(P,t,G);const U={};G&1&&(U.guide=t[0].data.getGuide),S.$set(U);const H={};G&1&&(H.author=t[0].data.getGuide.user),_.$set(H)},i:function(E){g||(F(S.$$.fragment,E),F(_.$$.fragment,E),g=!0)},o:function(E){L(S.$$.fragment,E),L(_.$$.fragment,E),g=!1},d:function(E){E&&p(e),y&&y.d(),P.block.d(),P.token=null,P=null,ae(S),ae(_)}};return O("SvelteRegisterBlock",{block:N,id:Ae.name,type:"if",source:"(63:31) ",ctx:t}),N}function Te(t){let e,s,n=t[0].error.message+"",o;const r={c:function(){e=w("p"),s=C("Oh no... "),o=C(n),this.h()},l:function(i){e=b(i,"P",{});var l=k(e);s=V(l,"Oh no... "),o=V(l,n),l.forEach(p),this.h()},h:function(){x(e,R,70,2,2070)},m:function(i,l){M(i,e,l),f(e,s),f(e,o)},p:function(i,l){l&1&&n!==(n=i[0].error.message+"")&&z(o,n)},i:D,o:D,d:function(i){i&&p(e)}};return O("SvelteRegisterBlock",{block:r,id:Te.name,type:"if",source:"(61:23) ",ctx:t}),r}function Me(t){let e,s="Loading...";const n={c:function(){e=w("p"),e.textContent=s,this.h()},l:function(r){e=b(r,"P",{"data-svelte-h":!0}),ue(e)!=="svelte-qdsr2u"&&(e.textContent=s),this.h()},h:function(){x(e,R,68,2,2026)},m:function(r,a){M(r,e,a)},p:D,i:D,o:D,d:function(r){r&&p(e)}};return O("SvelteRegisterBlock",{block:n,id:Me.name,type:"if",source:"(59:0) {#if $guide.fetching}",ctx:t}),n}function me(t){let e,s,n="edit",o,r,a,i,l="delete",c,m,u;const v={c:function(){e=w("button"),s=w("span"),s.textContent=n,o=C(`
            Edit`),r=A(),a=w("button"),i=w("span"),i.textContent=l,c=C(`
            Delete`),this.h()},l:function(h){e=b(h,"BUTTON",{class:!0});var $=k(e);s=b($,"SPAN",{class:!0,"data-svelte-h":!0}),ue(s)!=="svelte-xwpm3e"&&(s.textContent=n),o=V($,`
            Edit`),$.forEach(p),r=T(h),a=b(h,"BUTTON",{class:!0});var S=k(a);i=b(S,"SPAN",{class:!0,"data-svelte-h":!0}),ue(i)!=="svelte-120hsax"&&(i.textContent=l),c=V(S,`
            Delete`),S.forEach(p),this.h()},h:function(){I(s,"class","material-icons pr-2"),x(s,R,79,12,2489),I(e,"class","variant-ghost-primary btn"),x(e,R,78,10,2374),I(i,"class","material-icons pr-2"),x(i,R,82,12,2675),I(a,"class","variant-ghost-primary btn"),x(a,R,81,10,2571)},m:function(h,$){M(h,e,$),f(e,s),f(e,o),M(h,r,$),M(h,a,$),f(a,i),f(a,c),m||(u=[Pe(e,"click",t[8],!1,!1,!1,!1),Pe(a,"click",t[9],!1,!1,!1,!1)],m=!0)},p:D,d:function(h){h&&(p(e),p(r),p(a)),m=!1,Ke(u)}};return O("SvelteRegisterBlock",{block:v,id:me.name,type:"if",source:"(69:8) {#if canUserEdit}",ctx:t}),v}function Ue(t){const e={c:D,l:D,m:D,p:D,d:D};return O("SvelteRegisterBlock",{block:e,id:Ue.name,type:"catch",source:'(1:0) <script lang=\\"ts\\">import { DeleteGuideDocument }',ctx:t}),e}function He(t){let e,s,n=t[13]+"";const o={c:function(){e=w("p"),s=new Qe(!1),this.h()},l:function(a){e=b(a,"P",{});var i=k(e);s=We(i,!1),i.forEach(p),this.h()},h:function(){s.a=null,x(e,R,93,14,3080)},m:function(a,i){M(a,e,i),s.m(n,e)},p:function(a,i){i&1&&n!==(n=a[13]+"")&&s.p(n)},d:function(a){a&&p(e)}};return O("SvelteRegisterBlock",{block:o,id:He.name,type:"then",source:"(83:76)                <!-- eslint-disable -->               <p>{@html guideRendered}",ctx:t}),o}function qe(t){const e={c:D,l:D,m:D,p:D,d:D};return O("SvelteRegisterBlock",{block:e,id:qe.name,type:"pending",source:'(1:0) <script lang=\\"ts\\">import { DeleteGuideDocument }',ctx:t}),e}function $e(t){let e,s,n,o,r,a,i=!t[0].fetching&&!t[0].error&&t[0].data.getGuide&&pe(t);const l=[Me,Te,Ae,Ne],c=[];function m(v,d){return v[0].fetching?0:v[0].error?1:v[0].data.getGuide?2:3}n=m(t),o=c[n]=l[n](t);const u={c:function(){i&&i.c(),e=te(),s=A(),o.c(),r=te()},l:function(d){const h=ze("svelte-bhfvpi",document.head);i&&i.l(h),e=te(),h.forEach(p),s=T(d),o.l(d),r=te()},m:function(d,h){i&&i.m(document.head,null),f(document.head,e),M(d,s,h),c[n].m(d,h),M(d,r,h),a=!0},p:function(d,[h]){!d[0].fetching&&!d[0].error&&d[0].data.getGuide?i?(i.p(d,h),h&1&&F(i,1)):(i=pe(d),i.c(),F(i,1),i.m(e.parentNode,e)):i&&(De(),L(i,1,1,()=>{i=null}),Ie());let $=n;n=m(d),n===$?c[n].p(d,h):(De(),L(c[$],1,1,()=>{c[$]=null}),Ie(),o=c[n],o?o.p(d,h):(o=c[n]=l[n](d),o.c()),F(o,1),o.m(r.parentNode,r))},i:function(d){a||(F(i),F(o),a=!0)},o:function(d){L(i),L(o),a=!1},d:function(d){d&&(p(s),p(r)),i&&i.d(d),p(e),c[n].d(d)}};return O("SvelteRegisterBlock",{block:u,id:$e.name,type:"component",source:"",ctx:t}),u}function ot(t,e,s){let n,o,r;oe(le,"user"),ye(t,le,g=>s(7,r=g));let{$$slots:a={},$$scope:i}=e;xe("Page",a,[]);let{data:l}=e;const{guideId:c,guide:m}=l;oe(m,"guide"),ye(t,m,g=>s(0,o=g));const u=Ee(),v=ke(),d=()=>{u.mutation(_e,{guideId:c}).toPromise().then(g=>{g.error?(console.error(g.error.message),v.trigger({message:"Error deleting guide: "+g.error.message,background:"variant-filled-error",autohide:!1})):(v.trigger({message:"Guide deleted",background:"variant-filled-success",timeout:5e3}),ce(Y+"/guides"))})},h={type:"confirm",title:"Delete Guide?",body:"Are you sure you wish to delete this guide?",response:g=>{g&&d()}},$=Ge();t.$$.on_mount.push(function(){l===void 0&&!("data"in e||t.$$.bound[t.$$.props.data])&&je.warn("<Page> was created without expected prop 'data'")});const S=["data"];Object.keys(e).forEach(g=>{!~S.indexOf(g)&&g.slice(0,2)!=="$$"&&g!=="slot"&&je.warn(`<Page> was created with unknown prop '${g}'`)});const B=()=>ce(Y+"/guide/"+c+"/edit"),_=()=>$.trigger(h);return t.$$set=g=>{"data"in g&&s(6,l=g.data)},t.$capture_state=()=>({DeleteGuideDocument:_e,GuideInfo:Ce,GuideAuthor:Ve,user:le,goto:ce,markdown:fe,base:Y,MetaDescriptors:Oe,getContextClient:Ee,getModalStore:Ge,getToastStore:ke,Page404:Be,data:l,guideId:c,guide:m,client:u,toastStore:v,deleteGuideFn:d,deleteModal:h,modalStore:$,canUserEdit:n,$guide:o,$user:r}),t.$inject_state=g=>{"data"in g&&s(6,l=g.data),"canUserEdit"in g&&s(1,n=g.canUserEdit)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),t.$$.update=()=>{t.$$.dirty&129&&s(1,n=r?.roles?.deleteContent||r?.id===o?.data?.getGuide?.user?.id)},[o,n,c,m,h,$,l,r,B,_]}class ht extends ve{constructor(e){super(e),we(this,e,ot,$e,be,{data:6}),O("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:$e.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(e){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{ht as component,ft as universal};
//# sourceMappingURL=11.LB7MtxeL.js.map
