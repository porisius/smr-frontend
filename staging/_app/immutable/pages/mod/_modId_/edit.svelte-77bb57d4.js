import{S as mt,i as $t,d as x,Z as pt,bf as W,s as gt,a7 as w,a8 as I,a9 as S,u as g,t as h,ab as M,bg as X,y as ht,ae as xt,g as C,f as _,e as V,af as B,b0 as Et,k as p,l as G,h as j,j as q,ag as R,ac as bt,n as N,ad as v,p as b,r as Y,ai as vt,v as yt,aH as L,am as kt,an as wt,aG as A,aI as Z,aE as z,q as tt,ah as et,x as k}from"../../../chunks/vendor-71586dff.js";import{p as ot}from"../../../chunks/routing-689f9c1f.js";import{p as J,q as K}from"../../../chunks/graphql-587ea9ba.js";import{T as nt}from"../../../chunks/Toast-a48313ee.js";import{g as Q}from"../../../chunks/navigation-fe373893.js";import{M as it}from"../../../chunks/ModForm-9a1cf70e.js";import{b as U}from"../../../chunks/paths-396f020f.js";import{M as rt}from"../../../chunks/MetaDescriptors-51ef3627.js";import"../../../chunks/singletons-d1fb5791.js";import"../../../chunks/forms-a767280e.js";import"../../../chunks/forms-fcbfc7d5.js";import"../../../chunks/markdown-f8c8918c.js";import"../../../chunks/extras-71f1917d.js";import"../../../chunks/stores-b24fbbcb.js";const{console:st}=pt,D="src/routes/mod/[modId]/edit.svelte";function F(r){let t,o;t=new rt({props:{description:"Editing mod "+r[1].data.mod.name,title:"Edit mod "+r[1].data.mod.name,image:r[1].data.mod.logo},$$inline:!0});const s={c:function(){w(t.$$.fragment)},l:function(e){I(t.$$.fragment,e)},m:function(e,i){S(t,e,i),o=!0},p:function(e,i){const c={};i&2&&(c.description="Editing mod "+e[1].data.mod.name),i&2&&(c.title="Edit mod "+e[1].data.mod.name),i&2&&(c.image=e[1].data.mod.logo),t.$set(c)},i:function(e){o||(g(t.$$.fragment,e),o=!0)},o:function(e){h(t.$$.fragment,e),o=!1},d:function(e){M(t,e)}};return x("SvelteRegisterBlock",{block:s,id:F.name,type:"if",source:"(49:2) {#if !$mod.fetching && !$mod.error && $mod.data.mod}",ctx:r}),s}function at(r){let t,o;t=new it({props:{onSubmit:r[5],initialValues:r[3],editing:!0,submitText:"Save"},$$inline:!0});const s={c:function(){w(t.$$.fragment)},l:function(e){I(t.$$.fragment,e)},m:function(e,i){S(t,e,i),o=!0},p:function(e,i){const c={};i&8&&(c.initialValues=e[3]),t.$set(c)},i:function(e){o||(g(t.$$.fragment,e),o=!0)},o:function(e){h(t.$$.fragment,e),o=!1},d:function(e){M(t,e)}};return x("SvelteRegisterBlock",{block:s,id:at.name,type:"else",source:"(66:4) {:else}",ctx:r}),s}function ct(r){let t,o,s=r[1].error.message+"",n;const e={c:function(){t=V("p"),o=B("Oh no... "),n=B(s),this.h()},l:function(c){t=j(c,"P",{});var l=q(t);o=R(l,"Oh no... "),n=R(l,s),l.forEach(p),this.h()},h:function(){N(t,D,64,6,1837)},m:function(c,l){b(c,t,l),v(t,o),v(t,n)},p:function(c,l){l&2&&s!==(s=c[1].error.message+"")&&et(n,s)},i:k,o:k,d:function(c){c&&p(t)}};return x("SvelteRegisterBlock",{block:e,id:ct.name,type:"if",source:"(64:25) ",ctx:r}),e}function ft(r){let t,o;const s={c:function(){t=V("p"),o=B("Loading..."),this.h()},l:function(e){t=j(e,"P",{});var i=q(t);o=R(i,"Loading..."),i.forEach(p),this.h()},h:function(){N(t,D,62,6,1787)},m:function(e,i){b(e,t,i),v(t,o)},p:k,i:k,o:k,d:function(e){e&&p(t)}};return x("SvelteRegisterBlock",{block:s,id:ft.name,type:"if",source:"(62:4) {#if $mod.fetching}",ctx:r}),s}function dt(r){let t,o,s,n;const e=[ft,ct,at],i=[];function c(m,u){return m[1].fetching?0:m[1].error?1:2}t=c(r),o=i[t]=e[t](r);const l={c:function(){o.c(),s=C()},l:function(u){o.l(u),s=C()},m:function(u,d){i[t].m(u,d),b(u,s,d),n=!0},p:function(u,d){let E=t;t=c(u),t===E?i[t].p(u,d):(tt(),h(i[E],1,1,()=>{i[E]=null}),Y(),o=i[t],o?o.p(u,d):(o=i[t]=e[t](u),o.c()),g(o,1),o.m(s.parentNode,s))},i:function(u){n||(g(o),n=!0)},o:function(u){h(o),n=!1},d:function(u){i[t].d(u),u&&p(s)}};return x("SvelteRegisterBlock",{block:l,id:dt.name,type:"slot",source:"(61:2) <Content>",ctx:r}),l}function ut(r){let t,o;t=new X({props:{$$slots:{default:[dt]},$$scope:{ctx:r}},$$inline:!0});const s={c:function(){w(t.$$.fragment)},l:function(e){I(t.$$.fragment,e)},m:function(e,i){S(t,e,i),o=!0},p:function(e,i){const c={};i&522&&(c.$$scope={dirty:i,ctx:e}),t.$set(c)},i:function(e){o||(g(t.$$.fragment,e),o=!0)},o:function(e){h(t.$$.fragment,e),o=!1},d:function(e){M(t,e)}};return x("SvelteRegisterBlock",{block:s,id:ut.name,type:"slot",source:"(60:0) <Card>",ctx:r}),s}function lt(r){let t,o;const s={c:function(){t=V("span"),o=B(r[2]),this.h()},l:function(e){t=j(e,"SPAN",{});var i=q(t);o=R(i,r[2]),i.forEach(p),this.h()},h:function(){N(t,D,72,2,2032)},m:function(e,i){b(e,t,i),v(t,o)},p:function(e,i){i&4&&et(o,e[2])},d:function(e){e&&p(t)}};return x("SvelteRegisterBlock",{block:s,id:lt.name,type:"slot",source:"(72:0) <Toast bind:running={errorToast}>",ctx:r}),s}function H(r){let t,o,s,n,e,i,c,l,m,u,d=!r[1].fetching&&!r[1].error&&r[1].data.mod&&F(r);i=new W({props:{$$slots:{default:[ut]},$$scope:{ctx:r}},$$inline:!0});function E(f){r[7](f)}let T={$$slots:{default:[lt]},$$scope:{ctx:r}};r[0]!==void 0&&(T.running=r[0]),l=new nt({props:T,$$inline:!0}),ht.push(()=>xt(l,"running",E));const P={c:function(){d&&d.c(),t=C(),o=_(),s=V("h1"),n=B("Edit Mod"),e=_(),w(i.$$.fragment),c=_(),w(l.$$.fragment),this.h()},l:function(a){const $=Et('[data-svelte="svelte-mi1wi5"]',document.head);d&&d.l($),t=C(),$.forEach(p),o=G(a),s=j(a,"H1",{class:!0});var y=q(s);n=R(y,"Edit Mod"),y.forEach(p),e=G(a),I(i.$$.fragment,a),c=G(a),I(l.$$.fragment,a),this.h()},h:function(){bt(s,"class","text-4xl my-4 font-bold"),N(s,D,57,0,1687)},m:function(a,$){d&&d.m(document.head,null),v(document.head,t),b(a,o,$),b(a,s,$),v(s,n),b(a,e,$),S(i,a,$),b(a,c,$),S(l,a,$),u=!0},p:function(a,[$]){!a[1].fetching&&!a[1].error&&a[1].data.mod?d?(d.p(a,$),$&2&&g(d,1)):(d=F(a),d.c(),g(d,1),d.m(t.parentNode,t)):d&&(tt(),h(d,1,1,()=>{d=null}),Y());const y={};$&522&&(y.$$scope={dirty:$,ctx:a}),i.$set(y);const O={};$&516&&(O.$$scope={dirty:$,ctx:a}),!m&&$&1&&(m=!0,O.running=a[0],vt(()=>m=!1)),l.$set(O)},i:function(a){u||(g(d),g(i.$$.fragment,a),g(l.$$.fragment,a),u=!0)},o:function(a){h(d),h(i.$$.fragment,a),h(l.$$.fragment,a),u=!1},d:function(a){d&&d.d(a),p(t),a&&p(o),a&&p(s),a&&p(e),M(i,a),a&&p(c),M(l,a)}};return x("SvelteRegisterBlock",{block:P,id:H.name,type:"component",source:"",ctx:r}),P}const It=ot();function St(r,t,o){let s,n,{$$slots:e={},$$scope:i}=t;yt("Edit",e,[]);let{modId:c}=t,l="",m=!1;const u=L(J,{mod:c});kt(u,"mod"),wt(r,u,f=>o(1,n=f));const d=A({query:K}),E=f=>{d({modId:z(u).data.mod.id,mod:f}).then(a=>{a.error?(console.error(a.error.message),o(2,l="Error editing mod: "+a.error.message),o(0,m=!0)):Q(U+"/mod/"+a.data.updateMod.id)})};Z(u);const T=["modId"];Object.keys(t).forEach(f=>{!~T.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&st.warn(`<Edit> was created with unknown prop '${f}'`)});function P(f){m=f,o(0,m)}return r.$$set=f=>{"modId"in f&&o(6,c=f.modId)},r.$capture_state=()=>({paramsToProps:ot,load:It,mutation:A,operationStore:L,query:Z,EditModDocument:K,GetModDocument:J,Toast:nt,goto:Q,ModForm:it,base:U,MetaDescriptors:rt,Card:W,Content:X,get:z,modId:c,errorMessage:l,errorToast:m,mod:u,editMod:d,onSubmit:E,initialValues:s,$mod:n}),r.$inject_state=f=>{"modId"in f&&o(6,c=f.modId),"errorMessage"in f&&o(2,l=f.errorMessage),"errorToast"in f&&o(0,m=f.errorToast),"initialValues"in f&&o(3,s=f.initialValues)},t&&"$$inject"in t&&r.$inject_state(t.$$inject),r.$$.update=()=>{r.$$.dirty&1&&(m||o(2,l="")),r.$$.dirty&2&&o(3,s=n.data?{...n.data.mod,logo:void 0}:void 0)},[m,n,l,s,u,E,c,P]}class Ft extends mt{constructor(t){super(t),$t(this,t,St,H,gt,{modId:6}),x("SvelteRegisterComponent",{component:this,tagName:"Edit",options:t,id:H.name});const{ctx:o}=this.$$,s=t.props||{};o[6]===void 0&&!("modId"in s)&&st.warn("<Edit> was created without expected prop 'modId'")}get modId(){throw new Error("<Edit>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set modId(t){throw new Error("<Edit>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{Ft as default,It as load};
//# sourceMappingURL=edit.svelte-77bb57d4.js.map
