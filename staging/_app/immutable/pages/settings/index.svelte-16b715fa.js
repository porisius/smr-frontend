import{S as Ve,i as Ae,d as N,bf as $e,s as Ie,bg as me,y as pe,ae as ge,a7 as q,f as j,e as w,af as L,b0 as Ne,a8 as O,k as $,l as U,h as E,j as T,ag as G,ac as b,n as R,a9 as _,p as V,ad as S,ai as de,u as A,t as I,ab as z,am as Pe,an as Ce,v as De,aG as ae,aM as he,b as je,Z as Ue,x as Z,g as ne,q as qe,r as Oe,ah as X,O as _e}from"../../chunks/vendor-71586dff.js";import{J as re}from"../../chunks/graphql-587ea9ba.js";import{T as ve}from"../../chunks/Toast-a48313ee.js";import{g as oe}from"../../chunks/navigation-fe373893.js";import{o as ze,b as Fe,c as Le,s as Ge,I as ie,e as ce,a as le,V as Q,z as He,T as xe}from"../../chunks/forms-a767280e.js";import{t as fe}from"../../chunks/forms-fcbfc7d5.js";import{a as K}from"../../chunks/user-aa766597.js";import{b as ue}from"../../chunks/paths-396f020f.js";import{M as Se}from"../../chunks/MetaDescriptors-51ef3627.js";import"../../chunks/singletons-d1fb5791.js";import"../../chunks/stores-b24fbbcb.js";const{console:Je}=Ue,B="src/routes/settings/index.svelte";function ye(o){let e,t,s,r,n,a,l,v,u,f,d,m,M,p,i,g,y,c,H,D,Y;u=new Q({props:{for:"avatar",$$slots:{default:[ke,({messages:x})=>({10:x}),({messages:x})=>x?1024:0]},$$scope:{ctx:o}},$$inline:!0});function Te(x){o[7](x)}let ee={label:"Username",required:!0};o[5].username!==void 0&&(ee.value=o[5].username),m=new xe({props:ee,$$inline:!0}),pe.push(()=>ge(m,"value",Te)),i=new Q({props:{for:"username",$$slots:{default:[we,({messages:x})=>({10:x}),({messages:x})=>x?1024:0]},$$scope:{ctx:o}},$$inline:!0}),c=new he({props:{type:"submit",variant:"outlined",$$slots:{default:[Ee]},$$scope:{ctx:o}},$$inline:!0});const te={c:function(){e=w("form"),t=w("div"),s=w("div"),r=w("label"),n=L("Avatar:"),a=j(),l=w("input"),v=j(),q(u.$$.fragment),f=j(),d=w("div"),q(m.$$.fragment),p=j(),q(i.$$.fragment),g=j(),y=w("div"),q(c.$$.fragment),this.h()},l:function(h){e=E(h,"FORM",{});var k=T(e);t=E(k,"DIV",{class:!0});var P=T(t);s=E(P,"DIV",{class:!0});var C=T(s);r=E(C,"LABEL",{for:!0});var J=T(r);n=G(J,"Avatar:"),J.forEach($),a=U(C),l=E(C,"INPUT",{id:!0,class:!0,name:!0,type:!0,accept:!0,placeholder:!0}),v=U(C),O(u.$$.fragment,C),C.forEach($),f=U(P),d=E(P,"DIV",{class:!0});var F=T(d);O(m.$$.fragment,F),p=U(F),O(i.$$.fragment,F),F.forEach($),g=U(P),y=E(P,"DIV",{});var se=T(y);O(c.$$.fragment,se),se.forEach($),P.forEach($),k.forEach($),this.h()},h:function(){b(r,"for","avatar"),R(r,B,73,12,2448),b(l,"id","avatar"),b(l,"class","base-input"),b(l,"name","avatar"),b(l,"type","file"),b(l,"accept","image/png,image/jpeg,image/gif"),b(l,"placeholder","Avatar"),R(l,B,74,12,2496),b(s,"class","grid grid-flow-row gap-2"),R(s,B,72,10,2397),b(d,"class","grid grid-flow-row gap-2"),R(d,B,87,10,2919),R(y,B,94,10,3239),b(t,"class","grid grid-flow-row gap-6"),R(t,B,71,8,2348),R(e,B,70,6,2324)},m:function(h,k){V(h,e,k),S(e,t),S(t,s),S(s,r),S(r,n),S(s,a),S(s,l),S(s,v),_(u,s,null),S(t,f),S(t,d),_(m,d,null),S(d,p),_(i,d,null),S(t,g),S(t,y),_(c,y,null),H=!0,D||(Y=_e(o[4].call(null,e)),D=!0)},p:function(h,k){const P={};k&3072&&(P.$$scope={dirty:k,ctx:h}),u.$set(P);const C={};!M&&k&32&&(M=!0,C.value=h[5].username,de(()=>M=!1)),m.$set(C);const J={};k&3072&&(J.$$scope={dirty:k,ctx:h}),i.$set(J);const F={};k&2048&&(F.$$scope={dirty:k,ctx:h}),c.$set(F)},i:function(h){H||(A(u.$$.fragment,h),A(m.$$.fragment,h),A(i.$$.fragment,h),A(c.$$.fragment,h),H=!0)},o:function(h){I(u.$$.fragment,h),I(m.$$.fragment,h),I(i.$$.fragment,h),I(c.$$.fragment,h),H=!1},d:function(h){h&&$(e),z(u),z(m),z(i),z(c),D=!1,Y()}};return N("SvelteRegisterBlock",{block:te,id:ye.name,type:"else",source:"(70:4) {:else}",ctx:o}),te}function be(o){let e,t;const s={c:function(){e=w("p"),t=L("Please log in"),this.h()},l:function(n){e=E(n,"P",{});var a=T(e);t=G(a,"Please log in"),a.forEach($),this.h()},h:function(){R(e,B,68,6,2285)},m:function(n,a){V(n,e,a),S(e,t)},p:Z,i:Z,o:Z,d:function(n){n&&$(e)}};return N("SvelteRegisterBlock",{block:s,id:be.name,type:"if",source:"(68:4) {#if $user === null}",ctx:o}),s}function ke(o){let e,t=(o[10]||"")+"",s;const r={c:function(){e=w("span"),s=L(t),this.h()},l:function(a){e=E(a,"SPAN",{class:!0});var l=T(e);s=G(l,t),l.forEach($),this.h()},h:function(){b(e,"class","validation-message"),R(e,B,83,14,2802)},m:function(a,l){V(a,e,l),S(e,s)},p:function(a,l){l&1024&&t!==(t=(a[10]||"")+"")&&X(s,t)},d:function(a){a&&$(e)}};return N("SvelteRegisterBlock",{block:r,id:ke.name,type:"slot",source:'(83:12) <ValidationMessage for=\\"avatar\\" let:messages={message}>',ctx:o}),r}function we(o){let e,t=(o[10]||"")+"",s;const r={c:function(){e=w("span"),s=L(t),this.h()},l:function(a){e=E(a,"SPAN",{class:!0});var l=T(e);s=G(l,t),l.forEach($),this.h()},h:function(){b(e,"class","validation-message"),R(e,B,90,14,3122)},m:function(a,l){V(a,e,l),S(e,s)},p:function(a,l){l&1024&&t!==(t=(a[10]||"")+"")&&X(s,t)},d:function(a){a&&$(e)}};return N("SvelteRegisterBlock",{block:r,id:we.name,type:"slot",source:'(90:12) <ValidationMessage for=\\"username\\" let:messages={message}>',ctx:o}),r}function Ee(o){let e;const t={c:function(){e=L("Save")},l:function(r){e=G(r,"Save")},m:function(r,n){V(r,e,n)},d:function(r){r&&$(e)}};return N("SvelteRegisterBlock",{block:t,id:Ee.name,type:"slot",source:'(96:12) <Button type=\\"submit\\" variant=\\"outlined\\">',ctx:o}),t}function Re(o){let e,t,s,r;const n=[be,ye],a=[];function l(u,f){return u[2]===null?0:1}e=l(o),t=a[e]=n[e](o);const v={c:function(){t.c(),s=ne()},l:function(f){t.l(f),s=ne()},m:function(f,d){a[e].m(f,d),V(f,s,d),r=!0},p:function(f,d){let m=e;e=l(f),e===m?a[e].p(f,d):(qe(),I(a[m],1,1,()=>{a[m]=null}),Oe(),t=a[e],t?t.p(f,d):(t=a[e]=n[e](f),t.c()),A(t,1),t.m(s.parentNode,s))},i:function(f){r||(A(t),r=!0)},o:function(f){I(t),r=!1},d:function(f){a[e].d(f),f&&$(s)}};return N("SvelteRegisterBlock",{block:v,id:Re.name,type:"slot",source:"(67:2) <Content>",ctx:o}),v}function Be(o){let e,t;e=new me({props:{$$slots:{default:[Re]},$$scope:{ctx:o}},$$inline:!0});const s={c:function(){q(e.$$.fragment)},l:function(n){O(e.$$.fragment,n)},m:function(n,a){_(e,n,a),t=!0},p:function(n,a){const l={};a&2084&&(l.$$scope={dirty:a,ctx:n}),e.$set(l)},i:function(n){t||(A(e.$$.fragment,n),t=!0)},o:function(n){I(e.$$.fragment,n),t=!1},d:function(n){z(e,n)}};return N("SvelteRegisterBlock",{block:s,id:Be.name,type:"slot",source:"(66:0) <Card>",ctx:o}),s}function Me(o){let e,t;const s={c:function(){e=w("span"),t=L(o[3]),this.h()},l:function(n){e=E(n,"SPAN",{});var a=T(e);t=G(a,o[3]),a.forEach($),this.h()},h:function(){R(e,B,104,2,3426)},m:function(n,a){V(n,e,a),S(e,t)},p:function(n,a){a&8&&X(t,n[3])},d:function(n){n&&$(e)}};return N("SvelteRegisterBlock",{block:s,id:Me.name,type:"slot",source:"(104:0) <Toast bind:running={errorToast}>",ctx:o}),s}function W(o){let e,t,s,r,n,a,l,v,u,f;e=new Se({props:{description:"Change your user settings",title:"Settings"},$$inline:!0}),a=new $e({props:{$$slots:{default:[Be]},$$scope:{ctx:o}},$$inline:!0});function d(p){o[8](p)}let m={$$slots:{default:[Me]},$$scope:{ctx:o}};o[0]!==void 0&&(m.running=o[0]),v=new ve({props:m,$$inline:!0}),pe.push(()=>ge(v,"running",d));const M={c:function(){q(e.$$.fragment),t=j(),s=w("h1"),r=L("Settings"),n=j(),q(a.$$.fragment),l=j(),q(v.$$.fragment),this.h()},l:function(i){const g=Ne('[data-svelte="svelte-1ae5i2c"]',document.head);O(e.$$.fragment,g),g.forEach($),t=U(i),s=E(i,"H1",{class:!0});var y=T(s);r=G(y,"Settings"),y.forEach($),n=U(i),O(a.$$.fragment,i),l=U(i),O(v.$$.fragment,i),this.h()},h:function(){b(s,"class","text-4xl my-4 font-bold"),R(s,B,63,0,2184)},m:function(i,g){_(e,document.head,null),V(i,t,g),V(i,s,g),S(s,r),V(i,n,g),_(a,i,g),V(i,l,g),_(v,i,g),f=!0},p:function(i,[g]){const y={};g&2084&&(y.$$scope={dirty:g,ctx:i}),a.$set(y);const c={};g&2056&&(c.$$scope={dirty:g,ctx:i}),!u&&g&1&&(u=!0,c.running=i[0],de(()=>u=!1)),v.$set(c)},i:function(i){f||(A(e.$$.fragment,i),A(a.$$.fragment,i),A(v.$$.fragment,i),f=!0)},o:function(i){I(e.$$.fragment,i),I(a.$$.fragment,i),I(v.$$.fragment,i),f=!1},d:function(i){z(e),i&&$(t),i&&$(s),i&&$(n),z(a,i),i&&$(l),z(v,i)}};return N("SvelteRegisterBlock",{block:M,id:W.name,type:"component",source:"",ctx:o}),M}function Ze(o,e,t){let s,r,n=Z,a=()=>(n(),n=je(p,c=>t(5,r=c)),p);Pe(K,"user"),Ce(o,K,c=>t(2,s=c)),o.$$.on_destroy.push(()=>n());let{$$slots:l={},$$scope:v}=e;De("Settings",l,[]);let u="",f=!1;const d=ae({query:re}),m=ze({avatar:Fe(Le().refine(c=>"name"in c&&"size"in c&&"type"in c)),username:Ge().min(3).max(32)});let M,p;const i=[];Object.keys(e).forEach(c=>{!~i.indexOf(c)&&c.slice(0,2)!=="$$"&&c!=="slot"&&Je.warn(`<Settings> was created with unknown prop '${c}'`)});function g(c){o.$$.not_equal(r.username,c)&&(r.username=c,p.set(r))}function y(c){f=c,t(0,f),t(2,s)}return o.$capture_state=()=>({mutation:ae,UpdateUserDocument:re,Toast:ve,goto:oe,createForm:ie,validator:ce,svelteReporter:le,ValidationMessage:Q,trimNonSchema:fe,user:K,zod:He,base:ue,MetaDescriptors:Se,Card:$e,Content:me,Textfield:xe,Button:he,errorMessage:u,errorToast:f,updateUser:d,userSchema:m,form:M,data:p,$user:s,$data:r}),o.$inject_state=c=>{"errorMessage"in c&&t(3,u=c.errorMessage),"errorToast"in c&&t(0,f=c.errorToast),"form"in c&&t(4,M=c.form),"data"in c&&a(t(1,p=c.data))},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{if(o.$$.dirty&4&&s){const c=ie({initialValues:{username:s.username},extend:[ce,le],validateSchema:m,onSubmit:H=>{d({user:fe(H,m),userId:s.id}).then(D=>{D.error?(console.error(D.error.message),t(3,u="Error editing guide: "+D.error.message),t(0,f=!0)):oe(ue+"/user/"+D.data.updateUser.id)})}});t(4,M=c.form),a(t(1,p=c.data))}o.$$.dirty&1&&(f||t(3,u=""))},[f,p,s,u,M,r,m,g,y]}class ot extends Ve{constructor(e){super(e),Ae(this,e,Ze,W,Ie,{userSchema:6}),N("SvelteRegisterComponent",{component:this,tagName:"Settings",options:e,id:W.name})}get userSchema(){return this.$$.ctx[6]}set userSchema(e){throw new Error("<Settings>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{ot as default};
//# sourceMappingURL=index.svelte-16b715fa.js.map
