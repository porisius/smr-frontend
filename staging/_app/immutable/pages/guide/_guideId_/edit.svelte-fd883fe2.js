import{S as lt,i as $t,d as E,Z as gt,bf as U,s as mt,a7 as w,a8 as I,a9 as S,u as h,t as x,ab as B,bg as W,y as pt,ae as ht,g as C,f as D,e as M,af as R,b0 as xt,k as p,l as H,h as _,j,ag as T,ac as Et,n as q,ad as k,p as b,r as X,ai as bt,v as vt,aH as V,am as kt,an as yt,aG as A,aI as Z,q as Y,ah as tt,x as G}from"../../../chunks/vendor-71586dff.js";import{p as et}from"../../../chunks/routing-689f9c1f.js";import{k as z,E as J}from"../../../chunks/graphql-587ea9ba.js";import{T as it}from"../../../chunks/Toast-a48313ee.js";import{g as K}from"../../../chunks/navigation-fe373893.js";import{G as nt}from"../../../chunks/GuideForm-1fea23fd.js";import{b as Q}from"../../../chunks/paths-396f020f.js";import{M as ot}from"../../../chunks/MetaDescriptors-51ef3627.js";import"../../../chunks/singletons-d1fb5791.js";import"../../../chunks/forms-a767280e.js";import"../../../chunks/forms-fcbfc7d5.js";import"../../../chunks/markdown-f8c8918c.js";import"../../../chunks/extras-71f1917d.js";import"../../../chunks/stores-b24fbbcb.js";const{console:rt}=gt,N="src/routes/guide/[guideId]/edit.svelte";function F(r){let t,i;t=new ot({props:{description:"Editing guide '"+r[2].data.getGuide.short_description+"'",title:"Edit guide '"+r[2].data.getGuide.name+"'"},$$inline:!0});const s={c:function(){w(t.$$.fragment)},l:function(e){I(t.$$.fragment,e)},m:function(e,n){S(t,e,n),i=!0},p:function(e,n){const a={};n&4&&(a.description="Editing guide '"+e[2].data.getGuide.short_description+"'"),n&4&&(a.title="Edit guide '"+e[2].data.getGuide.name+"'"),t.$set(a)},i:function(e){i||(h(t.$$.fragment,e),i=!0)},o:function(e){x(t.$$.fragment,e),i=!1},d:function(e){B(t,e)}};return E("SvelteRegisterBlock",{block:s,id:F.name,type:"if",source:"(42:2) {#if !$guide.fetching && !$guide.error && $guide.data.getGuide}",ctx:r}),s}function st(r){let t,i;t=new nt({props:{onSubmit:r[4],initialValues:r[2].data.getGuide,submitText:"Save"},$$inline:!0});const s={c:function(){w(t.$$.fragment)},l:function(e){I(t.$$.fragment,e)},m:function(e,n){S(t,e,n),i=!0},p:function(e,n){const a={};n&4&&(a.initialValues=e[2].data.getGuide),t.$set(a)},i:function(e){i||(h(t.$$.fragment,e),i=!0)},o:function(e){x(t.$$.fragment,e),i=!1},d:function(e){B(t,e)}};return E("SvelteRegisterBlock",{block:s,id:st.name,type:"else",source:"(58:4) {:else}",ctx:r}),s}function ct(r){let t,i,s=r[2].error.message+"",o;const e={c:function(){t=M("p"),i=R("Oh no... "),o=R(s),this.h()},l:function(a){t=_(a,"P",{});var f=j(t);i=T(f,"Oh no... "),o=T(f,s),f.forEach(p),this.h()},h:function(){q(t,N,56,6,1735)},m:function(a,f){b(a,t,f),k(t,i),k(t,o)},p:function(a,f){f&4&&s!==(s=a[2].error.message+"")&&tt(o,s)},i:G,o:G,d:function(a){a&&p(t)}};return E("SvelteRegisterBlock",{block:e,id:ct.name,type:"if",source:"(56:27) ",ctx:r}),e}function at(r){let t,i;const s={c:function(){t=M("p"),i=R("Loading..."),this.h()},l:function(e){t=_(e,"P",{});var n=j(t);i=T(n,"Loading..."),n.forEach(p),this.h()},h:function(){q(t,N,54,6,1683)},m:function(e,n){b(e,t,n),k(t,i)},p:G,i:G,o:G,d:function(e){e&&p(t)}};return E("SvelteRegisterBlock",{block:s,id:at.name,type:"if",source:"(54:4) {#if $guide.fetching}",ctx:r}),s}function ut(r){let t,i,s,o;const e=[at,ct,st],n=[];function a($,d){return $[2].fetching?0:$[2].error?1:2}t=a(r),i=n[t]=e[t](r);const f={c:function(){i.c(),s=C()},l:function(d){i.l(d),s=C()},m:function(d,u){n[t].m(d,u),b(d,s,u),o=!0},p:function(d,u){let v=t;t=a(d),t===v?n[t].p(d,u):(Y(),x(n[v],1,1,()=>{n[v]=null}),X(),i=n[t],i?i.p(d,u):(i=n[t]=e[t](d),i.c()),h(i,1),i.m(s.parentNode,s))},i:function(d){o||(h(i),o=!0)},o:function(d){x(i),o=!1},d:function(d){n[t].d(d),d&&p(s)}};return E("SvelteRegisterBlock",{block:f,id:ut.name,type:"slot",source:"(53:2) <Content>",ctx:r}),f}function ft(r){let t,i;t=new W({props:{$$slots:{default:[ut]},$$scope:{ctx:r}},$$inline:!0});const s={c:function(){w(t.$$.fragment)},l:function(e){I(t.$$.fragment,e)},m:function(e,n){S(t,e,n),i=!0},p:function(e,n){const a={};n&260&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i:function(e){i||(h(t.$$.fragment,e),i=!0)},o:function(e){x(t.$$.fragment,e),i=!1},d:function(e){B(t,e)}};return E("SvelteRegisterBlock",{block:s,id:ft.name,type:"slot",source:"(52:0) <Card>",ctx:r}),s}function dt(r){let t,i;const s={c:function(){t=M("span"),i=R(r[1]),this.h()},l:function(e){t=_(e,"SPAN",{});var n=j(t);i=T(n,r[1]),n.forEach(p),this.h()},h:function(){q(t,N,64,2,1940)},m:function(e,n){b(e,t,n),k(t,i)},p:function(e,n){n&2&&tt(i,e[1])},d:function(e){e&&p(t)}};return E("SvelteRegisterBlock",{block:s,id:dt.name,type:"slot",source:"(64:0) <Toast bind:running={errorToast}>",ctx:r}),s}function L(r){let t,i,s,o,e,n,a,f,$,d,u=!r[2].fetching&&!r[2].error&&r[2].data.getGuide&&F(r);n=new U({props:{$$slots:{default:[ft]},$$scope:{ctx:r}},$$inline:!0});function v(m){r[6](m)}let P={$$slots:{default:[dt]},$$scope:{ctx:r}};r[0]!==void 0&&(P.running=r[0]),f=new it({props:P,$$inline:!0}),pt.push(()=>ht(f,"running",v));const l={c:function(){u&&u.c(),t=C(),i=D(),s=M("h1"),o=R("Edit Guide"),e=D(),w(n.$$.fragment),a=D(),w(f.$$.fragment),this.h()},l:function(c){const g=xt('[data-svelte="svelte-1e0nmq8"]',document.head);u&&u.l(g),t=C(),g.forEach(p),i=H(c),s=_(c,"H1",{class:!0});var y=j(s);o=T(y,"Edit Guide"),y.forEach(p),e=H(c),I(n.$$.fragment,c),a=H(c),I(f.$$.fragment,c),this.h()},h:function(){Et(s,"class","text-4xl my-4 font-bold"),q(s,N,49,0,1579)},m:function(c,g){u&&u.m(document.head,null),k(document.head,t),b(c,i,g),b(c,s,g),k(s,o),b(c,e,g),S(n,c,g),b(c,a,g),S(f,c,g),d=!0},p:function(c,[g]){!c[2].fetching&&!c[2].error&&c[2].data.getGuide?u?(u.p(c,g),g&4&&h(u,1)):(u=F(c),u.c(),h(u,1),u.m(t.parentNode,t)):u&&(Y(),x(u,1,1,()=>{u=null}),X());const y={};g&260&&(y.$$scope={dirty:g,ctx:c}),n.$set(y);const O={};g&258&&(O.$$scope={dirty:g,ctx:c}),!$&&g&1&&($=!0,O.running=c[0],bt(()=>$=!1)),f.$set(O)},i:function(c){d||(h(u),h(n.$$.fragment,c),h(f.$$.fragment,c),d=!0)},o:function(c){x(u),x(n.$$.fragment,c),x(f.$$.fragment,c),d=!1},d:function(c){u&&u.d(c),p(t),c&&p(i),c&&p(s),c&&p(e),B(n,c),c&&p(a),B(f,c)}};return E("SvelteRegisterBlock",{block:l,id:L.name,type:"component",source:"",ctx:r}),l}const Gt=et();function wt(r,t,i){let s,{$$slots:o={},$$scope:e}=t;vt("Edit",o,[]);let{guideId:n}=t,a="",f=!1;const $=V(z,{guide:n});kt($,"guide"),yt(r,$,l=>i(2,s=l));const d=A({query:J}),u=l=>{d({guideId:n,guide:l}).then(m=>{m.error?(console.error(m.error.message),i(1,a="Error editing guide: "+m.error.message),i(0,f=!0)):K(Q+"/guide/"+m.data.updateGuide.id)})};Z($);const v=["guideId"];Object.keys(t).forEach(l=>{!~v.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&rt.warn(`<Edit> was created with unknown prop '${l}'`)});function P(l){f=l,i(0,f)}return r.$$set=l=>{"guideId"in l&&i(5,n=l.guideId)},r.$capture_state=()=>({paramsToProps:et,Card:U,Content:W,load:Gt,mutation:A,operationStore:V,query:Z,EditGuideDocument:J,GetGuideDocument:z,Toast:it,goto:K,GuideForm:nt,base:Q,MetaDescriptors:ot,guideId:n,errorMessage:a,errorToast:f,guide:$,editGuide:d,onSubmit:u,$guide:s}),r.$inject_state=l=>{"guideId"in l&&i(5,n=l.guideId),"errorMessage"in l&&i(1,a=l.errorMessage),"errorToast"in l&&i(0,f=l.errorToast)},t&&"$$inject"in t&&r.$inject_state(t.$$inject),r.$$.update=()=>{r.$$.dirty&1&&(f||i(1,a=""))},[f,a,s,$,u,n,P]}class Ht extends lt{constructor(t){super(t),$t(this,t,wt,L,mt,{guideId:5}),E("SvelteRegisterComponent",{component:this,tagName:"Edit",options:t,id:L.name});const{ctx:i}=this.$$,s=t.props||{};i[5]===void 0&&!("guideId"in s)&&rt.warn("<Edit> was created without expected prop 'guideId'")}get guideId(){throw new Error("<Edit>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set guideId(t){throw new Error("<Edit>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{Ht as default,Gt as load};
//# sourceMappingURL=edit.svelte-fd883fe2.js.map
