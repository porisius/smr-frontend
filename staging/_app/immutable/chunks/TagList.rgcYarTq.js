import{S as ft,i as pt,s as gt,d as I,v as dt,F as Q,G as U,a1 as mt,a2 as ht,a as W,ah as it,ai as at,aj as ot,e as T,g as y,h as j,j as $,N as w,m as k,n as b,p as $t,t as R,q as vt,r as P,y as N,I as O,U as X,b as G,J as Y,M as lt,k as M,L as H,O as K,ad as bt,T as q,R as Z,f as tt,u as et,V as xt,W as wt,X as Tt,Q as _,Y as yt}from"./vendor.sC5Dcwro.js";import{a as nt}from"./graphql.fqwMiF4t.js";const L="src/lib/components/utils/TagList.svelte";function st(o,e,t){const s=o.slice();return s[18]=e[t],s}function ct(o){let e,t="Tags",s,u,i,r,p,l,a,c,h,g,x,E;function C(d){o[10](d)}function v(d){o[11](d)}let V={name:"tags",chips:"variant-filled-primary"};o[3]!==void 0&&(V.input=o[3]),o[2]!==void 0&&(V.value=o[2]),i=new at({props:V,$$inline:!0}),N.push(()=>O(i,"input",C)),N.push(()=>O(i,"value",v)),i.$on("remove",o[12]);function B(d){o[14](d)}let A={options:o[4].filter(o[13])};o[3]!==void 0&&(A.input=o[3]),c=new it({props:A,$$inline:!0}),N.push(()=>O(c,"input",B)),c.$on("selection",o[15]);const D={c:function(){e=T("div"),e.textContent=t,s=G(),u=T("div"),Y(i.$$.fragment),l=G(),a=T("div"),Y(c.$$.fragment),this.h()},l:function(f){e=y(f,"DIV",{class:!0,"data-svelte-h":!0}),lt(e)!=="svelte-14odz2i"&&(e.textContent=t),s=M(f),u=y(f,"DIV",{});var m=j(u);H(i.$$.fragment,m),m.forEach($),l=M(f),a=y(f,"DIV",{class:!0,tabindex:!0,"data-popup":!0});var n=j(a);H(c.$$.fragment,n),n.forEach($),this.h()},h:function(){w(e,"class","mb-2"),k(e,L,71,4,1476),k(u,L,73,4,1510),w(a,"class","card max-h-48 w-full max-w-sm overflow-y-auto p-4"),w(a,"tabindex","-1"),w(a,"data-popup","popupAutocomplete"),k(a,L,82,4,1753)},m:function(f,m){b(f,e,m),b(f,s,m),b(f,u,m),K(i,u,null),b(f,l,m),b(f,a,m),K(c,a,null),g=!0,x||(E=bt(ot.call(null,u,o[6])),x=!0)},p:function(f,m){const n={};!r&&m&8&&(r=!0,n.input=f[3],q(()=>r=!1)),!p&&m&4&&(p=!0,n.value=f[2],q(()=>p=!1)),i.$set(n);const S={};m&20&&(S.options=f[4].filter(f[13])),!h&&m&8&&(h=!0,S.input=f[3],q(()=>h=!1)),c.$set(S)},i:function(f){g||(P(i.$$.fragment,f),P(c.$$.fragment,f),g=!0)},o:function(f){R(i.$$.fragment,f),R(c.$$.fragment,f),g=!1},d:function(f){f&&($(e),$(s),$(u),$(l),$(a)),Z(i),Z(c),x=!1,E()}};return I("SvelteRegisterBlock",{block:D,id:ct.name,type:"else",source:"(57:2) {:else}",ctx:o}),D}function rt(o){let e,t=o[0].length>0&&z(o);const s={c:function(){t&&t.c(),e=tt()},l:function(i){t&&t.l(i),e=tt()},m:function(i,r){t&&t.m(i,r),b(i,e,r)},p:function(i,r){i[0].length>0?t?t.p(i,r):(t=z(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:et,o:et,d:function(i){i&&$(e),t&&t.d(i)}};return I("SvelteRegisterBlock",{block:s,id:rt.name,type:"if",source:"(47:2) {#if !editable}",ctx:o}),s}function z(o){let e,t=X(o[0]),s=[];for(let i=0;i<t.length;i+=1)s[i]=J(st(o,t,i));const u={c:function(){e=T("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l:function(r){e=y(r,"DIV",{class:!0});var p=j(e);for(let l=0;l<s.length;l+=1)s[l].l(p);p.forEach($),this.h()},h:function(){w(e,"class","text-md flex flex-row flex-wrap gap-1"),k(e,L,62,6,1214)},m:function(r,p){b(r,e,p);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(e,null)},p:function(r,p){if(p&1){t=X(r[0]);let l;for(l=0;l<t.length;l+=1){const a=st(r,t,l);s[l]?s[l].p(a,p):(s[l]=J(a),s[l].c(),s[l].m(e,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=t.length}},d:function(r){r&&$(e),xt(s,r)}};return I("SvelteRegisterBlock",{block:u,id:z.name,type:"if",source:"(48:4) {#if tags.length > 0}",ctx:o}),u}function J(o){let e,t,s="#",u=o[18].name+"",i,r;const p={c:function(){e=T("div"),t=T("span"),t.textContent=s,i=wt(u),r=G(),this.h()},l:function(a){e=y(a,"DIV",{class:!0});var c=j(e);t=y(c,"SPAN",{class:!0,"data-svelte-h":!0}),lt(t)!=="svelte-sdcp3o"&&(t.textContent=s),i=Tt(c,u),r=M(c),c.forEach($),this.h()},h:function(){w(t,"class","text-orange-500"),k(t,L,65,12,1357),w(e,"class","lowercase text-neutral-300"),k(e,L,64,10,1304)},m:function(a,c){b(a,e,c),_(e,t),_(e,i),_(e,r)},p:function(a,c){c&1&&u!==(u=a[18].name+"")&&yt(i,u)},d:function(a){a&&$(e)}};return I("SvelteRegisterBlock",{block:p,id:J.name,type:"each",source:"(50:8) {#each tags as tag}",ctx:o}),p}function F(o){let e,t,s,u;const i=[rt,ct],r=[];function p(a,c){return a[1]?1:0}t=p(o),s=r[t]=i[t](o);const l={c:function(){e=T("div"),s.c(),this.h()},l:function(c){e=y(c,"DIV",{class:!0});var h=j(e);s.l(h),h.forEach($),this.h()},h:function(){w(e,"class","tags"),k(e,L,59,0,1145)},m:function(c,h){b(c,e,h),r[t].m(e,null),u=!0},p:function(c,[h]){let g=t;t=p(c),t===g?r[t].p(c,h):($t(),R(r[g],1,1,()=>{r[g]=null}),vt(),s=r[t],s?s.p(c,h):(s=r[t]=i[t](c),s.c()),P(s,1),s.m(e,null))},i:function(c){u||(P(s),u=!0)},o:function(c){R(s),u=!1},d:function(c){c&&$(e),r[t].d()}};return I("SvelteRegisterBlock",{block:l,id:F.name,type:"component",source:"",ctx:o}),l}function kt(o,e,t){let s,u,{$$slots:i={},$$scope:r}=e;dt("TagList",i,[]);const p=Q(),l=U({query:nt,client:p,variables:{limit:100}});mt(l,"getAllTags"),ht(o,l,n=>t(9,u=n));let{tags:a=[]}=e,{editable:c=!1}=e;const h={event:"focus-click",target:"popupAutocomplete",placement:"bottom-start"};let g=[];const x=()=>t(2,g=a.map(n=>n.name));W(x);const E=n=>{t(0,a=[...a,{id:n.value,name:n.label}]),x()},C=n=>{const S=a.findIndex(ut=>ut.name===n);t(0,a=[...a.slice(0,S),...a.slice(S+1)]),x()};let v="";const V=["tags","editable"];Object.keys(e).forEach(n=>{!~V.indexOf(n)&&n.slice(0,2)!=="$$"&&n!=="slot"&&console.warn(`<TagList> was created with unknown prop '${n}'`)});function B(n){v=n,t(3,v)}function A(n){g=n,t(2,g)}const D=n=>C(n.detail.chipValue),d=n=>g.indexOf(n.label)<0;function f(n){v=n,t(3,v)}const m=n=>E(n.detail);return o.$$set=n=>{"tags"in n&&t(0,a=n.tags),"editable"in n&&t(1,c=n.editable)},o.$capture_state=()=>({GetTagsDocument:nt,queryStore:U,getContextClient:Q,Autocomplete:it,InputChip:at,popup:ot,onMount:W,client:p,getAllTags:l,tags:a,editable:c,popupSettings:h,tagList:g,loadTagList:x,addTag:E,removeTag:C,inputTag:v,allTags:s,$getAllTags:u}),o.$inject_state=n=>{"tags"in n&&t(0,a=n.tags),"editable"in n&&t(1,c=n.editable),"tagList"in n&&t(2,g=n.tagList),"inputTag"in n&&t(3,v=n.inputTag),"allTags"in n&&t(4,s=n.allTags)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{o.$$.dirty&512&&t(4,s=u.data?.getTags?.map(n=>({label:n.name,value:n.id}))||[])},[a,c,g,v,s,l,h,E,C,u,B,A,D,d,f,m]}class St extends ft{constructor(e){super(e),pt(this,e,kt,F,gt,{tags:0,editable:1}),I("SvelteRegisterComponent",{component:this,tagName:"TagList",options:e,id:F.name})}get tags(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set tags(e){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get editable(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set editable(e){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{St as T};
//# sourceMappingURL=TagList.rgcYarTq.js.map
