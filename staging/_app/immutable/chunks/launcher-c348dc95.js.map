{"version":3,"file":"launcher-c348dc95.js","sources":["../../../../../../src/lib/stores/launcher.ts"],"sourcesContent":["import { get, writable } from 'svelte/store';\nimport { browser } from '$app/env';\nimport { io } from 'socket.io-client';\n\nexport const customProtocolCheck = writable<unknown | null>(null);\nexport const hasLauncher = writable<boolean>(false);\nexport const launcherOpen = writable<boolean>(false);\n\nconst connectToLauncher = () => {\n  new Promise(() => {\n    const ws = io('http://localhost:33642', {\n      transports: ['websocket']\n    });\n\n    ws.on('connect', () => {\n      hasLauncher.set(true);\n      launcherOpen.set(true);\n    });\n\n    ws.on('disconnect', () => {\n      launcherOpen.set(false);\n    });\n  }).catch(console.error);\n};\n\nconst open = (link: string, fallback?: () => void) => {\n  if (browser) {\n    new Promise(() => {\n      get(customProtocolCheck).protocolCheck(link, () => {\n        hasLauncher.set(false);\n        if (fallback) {\n          fallback();\n        }\n      });\n    }).catch(console.error);\n  }\n};\n\nconst modLoaderLink = 'https://smm.ficsit.app/';\n\nexport const pingLauncher = () => {\n  open('smmanager://ping', () => {\n    window.open(modLoaderLink, '_blank');\n  });\n};\n\nexport const installMod = (modReference: string) => {\n  open('smmanager://install?modID=' + modReference, () => {\n    window.open(modLoaderLink, '_blank');\n  });\n};\n\nif (browser) {\n  connectToLauncher();\n}\n"],"names":["customProtocolCheck","writable","hasLauncher","launcherOpen","connectToLauncher","Promise","ws","io","transports","on","set","catch","console","error","open","link","fallback","get","protocolCheck","modLoaderLink","pingLauncher","window","installMod","modReference"],"mappings":"yDAIa,KAAAA,GAAsBC,EAAyB,IAAA,EAC/CC,EAAcD,EAAkB,EAAA,EAChCE,EAAeF,EAAkB,IAExCG,EAAoB,KACxB,GAAIC,SAAQ,IACJ,CAAA,KAAAC,GAAKC,EAAG,yBAA0B,CACtCC,WAAY,CAAC,WAGZF,CAAAA,CAAAA,EAAAA,EAAAG,GAAG,UAAW,IAAA,CACfP,EAAYQ,IAAI,EAChBP,EAAAA,EAAaO,IAAI,EAGhBJ,CAAAA,CAAAA,EAAAA,EAAAG,GAAG,aAAc,IAAA,CAClBN,EAAaO,IAAI,EAAA,CAAA,CAAA,CAAA,CAAA,EAElBC,MAAMC,QAAQC,KAGnB,CAAA,EAAMC,EAAO,CAACC,EAAcC,KAExB,GAAIX,SAAQ,IACVY,CAAAA,EAAIjB,CAAqBkB,EAAAA,cAAcH,EAAM,IAAA,CAC3Cb,EAAYQ,IAAI,EAAA,EACZM,GACOA,QAGZL,MAAMC,QAAQC,KAIrB,CAAA,EAAMM,EAAgB,0BAETC,EAAe,IAAA,CAC1BN,EAAK,mBAAoB,IAAA,CAChBO,OAAAP,KAAKK,EAAe,QAIlB,CAAA,CAAA,CAAA,EAAAG,EAAcC,GAAAA,CACpBT,EAAA,6BAA+BS,EAAc,IACzCF,CAAAA,OAAAP,KAAKK,EAAe,aAKXf,EAAAA"}