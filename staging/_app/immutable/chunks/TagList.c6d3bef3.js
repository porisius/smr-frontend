import{S as ft,i as pt,s as gt,d as I,v as dt,F as Q,G as U,a1 as mt,a2 as ht,a as W,af as at,ag as it,ah as ot,e as T,g as y,h as A,j as $,N as w,m as k,n as b,p as $t,t as R,q as vt,r as P,y as N,I as O,U as X,b as G,J as Y,M as lt,k as M,L as H,O as K,ab as bt,T as q,R as Z,f as tt,u as et,V as xt,W as wt,X as Tt,Q as _,Y as yt}from"./vendor.86b49dff.js";import{a as nt}from"./graphql.80ff4abf.js";const L="src/lib/components/utils/TagList.svelte";function st(o,e,t){const s=o.slice();return s[18]=e[t],s}function ct(o){let e,t="Tags",s,u,a,r,p,l,i,c,h,g,x,E;function C(d){o[10](d)}function v(d){o[11](d)}let V={name:"tags",chips:"variant-filled-primary"};o[3]!==void 0&&(V.input=o[3]),o[2]!==void 0&&(V.value=o[2]),a=new it({props:V,$$inline:!0}),N.push(()=>O(a,"input",C)),N.push(()=>O(a,"value",v)),a.$on("remove",o[12]);function B(d){o[14](d)}let j={options:o[4].filter(o[13])};o[3]!==void 0&&(j.input=o[3]),c=new at({props:j,$$inline:!0}),N.push(()=>O(c,"input",B)),c.$on("selection",o[15]);const D={c:function(){e=T("div"),e.textContent=t,s=G(),u=T("div"),Y(a.$$.fragment),l=G(),i=T("div"),Y(c.$$.fragment),this.h()},l:function(f){e=y(f,"DIV",{class:!0,"data-svelte-h":!0}),lt(e)!=="svelte-14odz2i"&&(e.textContent=t),s=M(f),u=y(f,"DIV",{});var m=A(u);H(a.$$.fragment,m),m.forEach($),l=M(f),i=y(f,"DIV",{class:!0,tabindex:!0,"data-popup":!0});var n=A(i);H(c.$$.fragment,n),n.forEach($),this.h()},h:function(){w(e,"class","mb-2"),k(e,L,69,4,1452),k(u,L,71,4,1486),w(i,"class","card w-full max-w-sm max-h-48 p-4 overflow-y-auto"),w(i,"tabindex","-1"),w(i,"data-popup","popupAutocomplete"),k(i,L,80,4,1729)},m:function(f,m){b(f,e,m),b(f,s,m),b(f,u,m),K(a,u,null),b(f,l,m),b(f,i,m),K(c,i,null),g=!0,x||(E=bt(ot.call(null,u,o[6])),x=!0)},p:function(f,m){const n={};!r&&m&8&&(r=!0,n.input=f[3],q(()=>r=!1)),!p&&m&4&&(p=!0,n.value=f[2],q(()=>p=!1)),a.$set(n);const S={};m&20&&(S.options=f[4].filter(f[13])),!h&&m&8&&(h=!0,S.input=f[3],q(()=>h=!1)),c.$set(S)},i:function(f){g||(P(a.$$.fragment,f),P(c.$$.fragment,f),g=!0)},o:function(f){R(a.$$.fragment,f),R(c.$$.fragment,f),g=!1},d:function(f){f&&($(e),$(s),$(u),$(l),$(i)),Z(a),Z(c),x=!1,E()}};return I("SvelteRegisterBlock",{block:D,id:ct.name,type:"else",source:"(55:2) {:else}",ctx:o}),D}function rt(o){let e,t=o[0].length>0&&z(o);const s={c:function(){t&&t.c(),e=tt()},l:function(a){t&&t.l(a),e=tt()},m:function(a,r){t&&t.m(a,r),b(a,e,r)},p:function(a,r){a[0].length>0?t?t.p(a,r):(t=z(a),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:et,o:et,d:function(a){a&&$(e),t&&t.d(a)}};return I("SvelteRegisterBlock",{block:s,id:rt.name,type:"if",source:"(45:2) {#if !editable}",ctx:o}),s}function z(o){let e,t=X(o[0]),s=[];for(let a=0;a<t.length;a+=1)s[a]=J(st(o,t,a));const u={c:function(){e=T("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l:function(r){e=y(r,"DIV",{class:!0});var p=A(e);for(let l=0;l<s.length;l+=1)s[l].l(p);p.forEach($),this.h()},h:function(){w(e,"class","flex flex-row flex-wrap text-md gap-1"),k(e,L,60,6,1190)},m:function(r,p){b(r,e,p);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(e,null)},p:function(r,p){if(p&1){t=X(r[0]);let l;for(l=0;l<t.length;l+=1){const i=st(r,t,l);s[l]?s[l].p(i,p):(s[l]=J(i),s[l].c(),s[l].m(e,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=t.length}},d:function(r){r&&$(e),xt(s,r)}};return I("SvelteRegisterBlock",{block:u,id:z.name,type:"if",source:"(46:4) {#if tags.length > 0}",ctx:o}),u}function J(o){let e,t,s="#",u=o[18].name+"",a,r;const p={c:function(){e=T("div"),t=T("span"),t.textContent=s,a=wt(u),r=G(),this.h()},l:function(i){e=y(i,"DIV",{class:!0});var c=A(e);t=y(c,"SPAN",{class:!0,"data-svelte-h":!0}),lt(t)!=="svelte-sdcp3o"&&(t.textContent=s),a=Tt(c,u),r=M(c),c.forEach($),this.h()},h:function(){w(t,"class","text-orange-500"),k(t,L,63,12,1333),w(e,"class","text-neutral-300 lowercase"),k(e,L,62,10,1280)},m:function(i,c){b(i,e,c),_(e,t),_(e,a),_(e,r)},p:function(i,c){c&1&&u!==(u=i[18].name+"")&&yt(a,u)},d:function(i){i&&$(e)}};return I("SvelteRegisterBlock",{block:p,id:J.name,type:"each",source:"(48:8) {#each tags as tag}",ctx:o}),p}function F(o){let e,t,s,u;const a=[rt,ct],r=[];function p(i,c){return i[1]?1:0}t=p(o),s=r[t]=a[t](o);const l={c:function(){e=T("div"),s.c(),this.h()},l:function(c){e=y(c,"DIV",{class:!0});var h=A(e);s.l(h),h.forEach($),this.h()},h:function(){w(e,"class","tags"),k(e,L,57,0,1121)},m:function(c,h){b(c,e,h),r[t].m(e,null),u=!0},p:function(c,[h]){let g=t;t=p(c),t===g?r[t].p(c,h):($t(),R(r[g],1,1,()=>{r[g]=null}),vt(),s=r[t],s?s.p(c,h):(s=r[t]=a[t](c),s.c()),P(s,1),s.m(e,null))},i:function(c){u||(P(s),u=!0)},o:function(c){R(s),u=!1},d:function(c){c&&$(e),r[t].d()}};return I("SvelteRegisterBlock",{block:l,id:F.name,type:"component",source:"",ctx:o}),l}function kt(o,e,t){let s,u,{$$slots:a={},$$scope:r}=e;dt("TagList",a,[]);const p=Q(),l=U({query:nt,client:p,variables:{}});mt(l,"getAllTags"),ht(o,l,n=>t(9,u=n));let{tags:i=[]}=e,{editable:c=!1}=e;const h={event:"focus-click",target:"popupAutocomplete",placement:"bottom-start"};let g=[];const x=()=>t(2,g=i.map(n=>n.name));W(x);const E=n=>{t(0,i=[...i,{id:n.value,name:n.label}]),x()},C=n=>{const S=i.findIndex(ut=>ut.name===n);t(0,i=[...i.slice(0,S),...i.slice(S+1)]),x()};let v="";const V=["tags","editable"];Object.keys(e).forEach(n=>{!~V.indexOf(n)&&n.slice(0,2)!=="$$"&&n!=="slot"&&console.warn(`<TagList> was created with unknown prop '${n}'`)});function B(n){v=n,t(3,v)}function j(n){g=n,t(2,g)}const D=n=>C(n.detail.chipValue),d=n=>g.indexOf(n.label)<0;function f(n){v=n,t(3,v)}const m=n=>E(n.detail);return o.$$set=n=>{"tags"in n&&t(0,i=n.tags),"editable"in n&&t(1,c=n.editable)},o.$capture_state=()=>({GetTagsDocument:nt,queryStore:U,getContextClient:Q,Autocomplete:at,InputChip:it,popup:ot,onMount:W,client:p,getAllTags:l,tags:i,editable:c,popupSettings:h,tagList:g,loadTagList:x,addTag:E,removeTag:C,inputTag:v,allTags:s,$getAllTags:u}),o.$inject_state=n=>{"tags"in n&&t(0,i=n.tags),"editable"in n&&t(1,c=n.editable),"tagList"in n&&t(2,g=n.tagList),"inputTag"in n&&t(3,v=n.inputTag),"allTags"in n&&t(4,s=n.allTags)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{o.$$.dirty&512&&t(4,s=u.data?.getTags?.map(n=>({label:n.name,value:n.id}))||[])},[i,c,g,v,s,l,h,E,C,u,B,j,D,d,f,m]}class St extends ft{constructor(e){super(e),pt(this,e,kt,F,gt,{tags:0,editable:1}),I("SvelteRegisterComponent",{component:this,tagName:"TagList",options:e,id:F.name})}get tags(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set tags(e){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get editable(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set editable(e){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{St as T};
//# sourceMappingURL=TagList.c6d3bef3.js.map
