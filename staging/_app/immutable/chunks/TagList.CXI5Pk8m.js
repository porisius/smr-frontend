import{S as he,i as ve,s as $e,d as R,v as Te,aB as N,e as P,X as se,b as U,g as L,h as I,R as we,Y as oe,j as v,k as M,N as w,m as C,aC as ie,ak as ae,l as Be,n as x,U as A,ad as Ee,V as Pe,Z as re,aD as Le,u as ce,a0 as Ce,aE as Se,F as le,G as pe,H as je,I as Ie,a as ue,aF as be,aG as ye,p as te,t as j,q as ne,r as k,y as q,a3 as G,O as fe,P as Q,Q as W,T as X,a5 as z,W as Y,f as ge,_ as Re}from"./vendor.BJcisrmX.js";import{a as de}from"./graphql.CNu7qPRc.js";const H="src/lib/components/utils/TagDisplay.svelte";function Z(s){let e,t,n,i="#",p=s[0].name+"",c,u,f,a,o,g,l,T=s[0].description+"",b,D,S,E;const V={c:function(){e=P("button"),t=P("div"),n=P("span"),n.textContent=i,c=se(p),o=U(),g=P("div"),l=P("p"),b=se(T),this.h()},l:function(h){e=L(h,"BUTTON",{class:!0});var m=I(e);t=L(m,"DIV",{class:!0,title:!0});var d=I(t);n=L(d,"SPAN",{class:!0,"data-svelte-h":!0}),we(n)!=="svelte-sdcp3o"&&(n.textContent=i),c=oe(d,p),d.forEach(v),m.forEach(v),o=M(h),g=L(h,"DIV",{class:!0,"data-popup":!0,style:!0});var $=I(g);l=L($,"P",{class:!0});var y=I(l);b=oe(y,T),y.forEach(v),$.forEach(v),this.h()},h:function(){w(n,"class","text-orange-500 svelte-1c06ml2"),C(n,H,23,4,650),w(t,"class","lowercase text-neutral-300 [&>*]:pointer-events-none svelte-1c06ml2"),w(t,"title",u=s[3]==="click"?"Click for tag information":""),C(t,H,20,2,498),w(e,"class",f=ie(s[1]?"chip hover:variant-filled-surface [&:not(:hover)]:variant-soft":"")+" svelte-1c06ml2"),ae(e,"selected",s[2]),C(e,H,15,0,343),w(l,"class","svelte-1c06ml2"),C(l,H,31,2,1084),w(g,"class","card variant-filled-surface p-4 svelte-1c06ml2"),w(g,"data-popup",D=`popupHoverFor${s[0].id}`),Be(g,"z-index","1000"),C(g,H,30,0,976)},m:function(h,m){x(h,e,m),A(e,t),A(t,n),A(t,c),x(h,o,m),x(h,g,m),A(g,l),A(l,b),S||(E=[Ee(a=N.call(null,e,s[4])),Pe(e,"click",s[5],!1,!1,!1,!1)],S=!0)},p:function(h,[m]){m&1&&p!==(p=h[0].name+"")&&re(c,p),m&8&&u!==(u=h[3]==="click"?"Click for tag information":"")&&w(t,"title",u),m&2&&f!==(f=ie(h[1]?"chip hover:variant-filled-surface [&:not(:hover)]:variant-soft":"")+" svelte-1c06ml2")&&w(e,"class",f),a&&Le(a.update)&&m&16&&a.update.call(null,h[4]),m&6&&ae(e,"selected",h[2]),m&1&&T!==(T=h[0].description+"")&&re(b,T),m&1&&D!==(D=`popupHoverFor${h[0].id}`)&&w(g,"data-popup",D)},i:ce,o:ce,d:function(h){h&&(v(e),v(o),v(g)),S=!1,Ce(E)}};return R("SvelteRegisterBlock",{block:V,id:Z.name,type:"component",source:"",ctx:s}),V}function Ve(s,e,t){let n,{$$slots:i={},$$scope:p}=e;Te("TagDisplay",i,[]);let{tag:c}=e,{asButton:u=!1}=e,{selected:f=!1}=e,{popupTriggerEvent:a="click"}=e;s.$$.on_mount.push(function(){c===void 0&&!("tag"in e||s.$$.bound[s.$$.props.tag])&&console.warn("<TagDisplay> was created without expected prop 'tag'")});const o=["tag","asButton","selected","popupTriggerEvent"];Object.keys(e).forEach(l=>{!~o.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&console.warn(`<TagDisplay> was created with unknown prop '${l}'`)});function g(l){Se.call(this,s,l)}return s.$$set=l=>{"tag"in l&&t(0,c=l.tag),"asButton"in l&&t(1,u=l.asButton),"selected"in l&&t(2,f=l.selected),"popupTriggerEvent"in l&&t(3,a=l.popupTriggerEvent)},s.$capture_state=()=>({popup:N,tag:c,asButton:u,selected:f,popupTriggerEvent:a,popupHover:n}),s.$inject_state=l=>{"tag"in l&&t(0,c=l.tag),"asButton"in l&&t(1,u=l.asButton),"selected"in l&&t(2,f=l.selected),"popupTriggerEvent"in l&&t(3,a=l.popupTriggerEvent),"popupHover"in l&&t(4,n=l.popupHover)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{s.$$.dirty&9&&t(4,n={event:a,target:`popupHoverFor${c.id}`,placement:"bottom-start"})},[c,u,f,a,n,g]}class xe extends he{constructor(e){super(e),ve(this,e,Ve,Z,$e,{tag:0,asButton:1,selected:2,popupTriggerEvent:3}),R("SvelteRegisterComponent",{component:this,tagName:"TagDisplay",options:e,id:Z.name})}get tag(){throw new Error("<TagDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set tag(e){throw new Error("<TagDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get asButton(){throw new Error("<TagDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set asButton(e){throw new Error("<TagDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get selected(){throw new Error("<TagDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set selected(e){throw new Error("<TagDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get popupTriggerEvent(){throw new Error("<TagDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set popupTriggerEvent(e){throw new Error("<TagDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const O="src/lib/components/utils/TagList.svelte";function me(s,e,t){const n=s.slice();return n[19]=e[t],n}function ke(s){let e,t="Tags",n,i,p,c,u,f,a,o,g,l,T,b;function D(m){s[11](m)}function S(m){s[12](m)}let E={name:"tags",chips:"variant-filled-primary"};s[4]!==void 0&&(E.input=s[4]),s[3]!==void 0&&(E.value=s[3]),p=new ye({props:E,$$inline:!0}),q.push(()=>G(p,"input",D)),q.push(()=>G(p,"value",S)),p.$on("remove",s[13]);function V(m){s[15](m)}let B={options:s[5].filter(s[14])};s[4]!==void 0&&(B.input=s[4]),o=new be({props:B,$$inline:!0}),q.push(()=>G(o,"input",V)),o.$on("selection",s[16]);const h={c:function(){e=P("div"),e.textContent=t,n=U(),i=P("div"),Q(p.$$.fragment),f=U(),a=P("div"),Q(o.$$.fragment),this.h()},l:function(d){e=L(d,"DIV",{class:!0,"data-svelte-h":!0}),we(e)!=="svelte-14odz2i"&&(e.textContent=t),n=M(d),i=L(d,"DIV",{});var $=I(i);W(p.$$.fragment,$),$.forEach(v),f=M(d),a=L(d,"DIV",{class:!0,tabindex:!0,"data-popup":!0});var y=I(a);W(o.$$.fragment,y),y.forEach(v),this.h()},h:function(){w(e,"class","mb-2"),C(e,O,74,4,1658),C(i,O,76,4,1692),w(a,"class","card max-h-48 w-max max-w-full overflow-y-auto p-4"),w(a,"tabindex","-1"),w(a,"data-popup","popupAutocomplete"),C(a,O,85,4,1935)},m:function(d,$){x(d,e,$),x(d,n,$),x(d,i,$),X(p,i,null),x(d,f,$),x(d,a,$),X(o,a,null),l=!0,T||(b=Ee(N.call(null,i,s[7])),T=!0)},p:function(d,$){const y={};!c&&$&16&&(c=!0,y.input=d[4],z(()=>c=!1)),!u&&$&8&&(u=!0,y.value=d[3],z(()=>u=!1)),p.$set(y);const r={};$&40&&(r.options=d[5].filter(d[14])),!g&&$&16&&(g=!0,r.input=d[4],z(()=>g=!1)),o.$set(r)},i:function(d){l||(k(p.$$.fragment,d),k(o.$$.fragment,d),l=!0)},o:function(d){j(p.$$.fragment,d),j(o.$$.fragment,d),l=!1},d:function(d){d&&(v(e),v(n),v(i),v(f),v(a)),Y(p),Y(o),T=!1,b()}};return R("SvelteRegisterBlock",{block:h,id:ke.name,type:"else",source:"(60:2) {:else}",ctx:s}),h}function De(s){let e,t,n=s[0].length>0&&J(s);const i={c:function(){n&&n.c(),e=ge()},l:function(c){n&&n.l(c),e=ge()},m:function(c,u){n&&n.m(c,u),x(c,e,u),t=!0},p:function(c,u){c[0].length>0?n?(n.p(c,u),u&1&&k(n,1)):(n=J(c),n.c(),k(n,1),n.m(e.parentNode,e)):n&&(te(),j(n,1,1,()=>{n=null}),ne())},i:function(c){t||(k(n),t=!0)},o:function(c){j(n),t=!1},d:function(c){c&&v(e),n&&n.d(c)}};return R("SvelteRegisterBlock",{block:i,id:De.name,type:"if",source:"(52:2) {#if !editable}",ctx:s}),i}function J(s){let e,t,n=fe(s[0]),i=[];for(let u=0;u<n.length;u+=1)i[u]=K(me(s,n,u));const p=u=>j(i[u],1,1,()=>{i[u]=null}),c={c:function(){e=P("div");for(let f=0;f<i.length;f+=1)i[f].c();this.h()},l:function(f){e=L(f,"DIV",{class:!0});var a=I(e);for(let o=0;o<i.length;o+=1)i[o].l(a);a.forEach(v),this.h()},h:function(){w(e,"class","text-md flex flex-row flex-wrap gap-1"),C(e,O,67,6,1474)},m:function(f,a){x(f,e,a);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null);t=!0},p:function(f,a){if(a&5){n=fe(f[0]);let o;for(o=0;o<n.length;o+=1){const g=me(f,n,o);i[o]?(i[o].p(g,a),k(i[o],1)):(i[o]=K(g),i[o].c(),k(i[o],1),i[o].m(e,null))}for(te(),o=n.length;o<i.length;o+=1)p(o);ne()}},i:function(f){if(!t){for(let a=0;a<n.length;a+=1)k(i[a]);t=!0}},o:function(f){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)j(i[a]);t=!1},d:function(f){f&&v(e),Re(i,f)}};return R("SvelteRegisterBlock",{block:c,id:J.name,type:"if",source:"(53:4) {#if tags.length > 0}",ctx:s}),c}function K(s){let e,t;e=new xe({props:{tag:s[19],popupTriggerEvent:s[2]},$$inline:!0});const n={c:function(){Q(e.$$.fragment)},l:function(p){W(e.$$.fragment,p)},m:function(p,c){X(e,p,c),t=!0},p:function(p,c){const u={};c&1&&(u.tag=p[19]),c&4&&(u.popupTriggerEvent=p[2]),e.$set(u)},i:function(p){t||(k(e.$$.fragment,p),t=!0)},o:function(p){j(e.$$.fragment,p),t=!1},d:function(p){Y(e,p)}};return R("SvelteRegisterBlock",{block:n,id:K.name,type:"each",source:"(55:8) {#each tags as tag}",ctx:s}),n}function ee(s){let e,t,n,i;const p=[De,ke],c=[];function u(a,o){return a[1]?1:0}t=u(s),n=c[t]=p[t](s);const f={c:function(){e=P("div"),n.c(),this.h()},l:function(o){e=L(o,"DIV",{class:!0});var g=I(e);n.l(g),g.forEach(v),this.h()},h:function(){w(e,"class","tags"),C(e,O,64,0,1405)},m:function(o,g){x(o,e,g),c[t].m(e,null),i=!0},p:function(o,[g]){let l=t;t=u(o),t===l?c[t].p(o,g):(te(),j(c[l],1,1,()=>{c[l]=null}),ne(),n=c[t],n?n.p(o,g):(n=c[t]=p[t](o),n.c()),k(n,1),n.m(e,null))},i:function(o){i||(k(n),i=!0)},o:function(o){j(n),i=!1},d:function(o){o&&v(e),c[t].d()}};return R("SvelteRegisterBlock",{block:f,id:ee.name,type:"component",source:"",ctx:s}),f}function _e(s,e,t){let n,i,{$$slots:p={},$$scope:c}=e;Te("TagList",p,[]);const u=le(),f=pe({query:de,client:u,variables:{limit:100}});je(f,"getAllTags"),Ie(s,f,r=>t(10,i=r));let{tags:a=[]}=e,{editable:o=!1}=e,{popupTriggerEvent:g="click"}=e;const l={event:"focus-click",target:"popupAutocomplete",placement:"bottom-start"};let T=[];const b=()=>t(3,T=a.map(r=>r.name));ue(b);const D=r=>{const _=i.data?.getTags?.find(F=>F.id==r.value);t(0,a=[...a,{id:r.value,name:_?.name,description:_?.description}]),b()},S=r=>{const _=a.findIndex(F=>F.name===r);t(0,a=[...a.slice(0,_),...a.slice(_+1)]),b()};let E="";const V=["tags","editable","popupTriggerEvent"];Object.keys(e).forEach(r=>{!~V.indexOf(r)&&r.slice(0,2)!=="$$"&&r!=="slot"&&console.warn(`<TagList> was created with unknown prop '${r}'`)});function B(r){E=r,t(4,E)}function h(r){T=r,t(3,T)}const m=r=>S(r.detail.chipValue),d=r=>T.indexOf(r.name)<0;function $(r){E=r,t(4,E)}const y=r=>D(r.detail);return s.$$set=r=>{"tags"in r&&t(0,a=r.tags),"editable"in r&&t(1,o=r.editable),"popupTriggerEvent"in r&&t(2,g=r.popupTriggerEvent)},s.$capture_state=()=>({GetTagsDocument:de,queryStore:pe,getContextClient:le,Autocomplete:be,InputChip:ye,popup:N,onMount:ue,TagDisplay:xe,client:u,getAllTags:f,tags:a,editable:o,popupTriggerEvent:g,popupSettings:l,tagList:T,loadTagList:b,addTag:D,removeTag:S,inputTag:E,allTags:n,$getAllTags:i}),s.$inject_state=r=>{"tags"in r&&t(0,a=r.tags),"editable"in r&&t(1,o=r.editable),"popupTriggerEvent"in r&&t(2,g=r.popupTriggerEvent),"tagList"in r&&t(3,T=r.tagList),"inputTag"in r&&t(4,E=r.inputTag),"allTags"in r&&t(5,n=r.allTags)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{s.$$.dirty&1024&&t(5,n=i.data?.getTags?.map(r=>({label:`${r.name} - ${r.description}`,value:r.id,name:r.name}))||[])},[a,o,g,T,E,n,f,l,D,S,i,B,h,m,d,$,y]}class Oe extends he{constructor(e){super(e),ve(this,e,_e,ee,$e,{tags:0,editable:1,popupTriggerEvent:2}),R("SvelteRegisterComponent",{component:this,tagName:"TagList",options:e,id:ee.name})}get tags(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set tags(e){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get editable(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set editable(e){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get popupTriggerEvent(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set popupTriggerEvent(e){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{Oe as T,xe as a};
//# sourceMappingURL=TagList.CXI5Pk8m.js.map
