import{S as le,i as ae,s as se,e as w,T as L,a as O,c as D,d as B,F as ne,U as M,f as m,g as P,G as $,aq as Q,af as R,h as oe,j as b,I as q,a8 as ie,ar as re,W as fe,V as W,as as ce,q as Z,a1 as ue,at as pe,k as J,t as y,l as K,m as I,K as de,L as ge,Z as ve,p as me,au as he,u as H,M as N,av as $e,A as j,D as S,H as U,N as z,J as G,b as X,Q as Y,R as xe}from"./vendor.qkHm75Lx.js";import{a as Ee}from"./graphql.XSrPrpK2.js";function Te(n){let t,a,e,l="#",c=n[0].name+"",i,o,s,f,p,g,x,E=n[0].description+"",k,T,A,C;return{c(){t=w("button"),a=w("div"),e=w("span"),e.textContent=l,i=L(c),p=O(),g=w("div"),x=w("p"),k=L(E),this.h()},l(d){t=D(d,"BUTTON",{class:!0});var v=B(t);a=D(v,"DIV",{class:!0,title:!0});var u=B(a);e=D(u,"SPAN",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-sdcp3o"&&(e.textContent=l),i=M(u,c),u.forEach(m),v.forEach(m),p=P(d),g=D(d,"DIV",{class:!0,"data-popup":!0,style:!0});var h=B(g);x=D(h,"P",{class:!0});var r=B(x);k=M(r,E),r.forEach(m),h.forEach(m),this.h()},h(){$(e,"class","text-orange-500 svelte-1c06ml2"),$(a,"class","lowercase text-neutral-300 [&>*]:pointer-events-none svelte-1c06ml2"),$(a,"title",o=n[3]==="click"?"Click for tag information":""),$(t,"class",s=Q(n[1]?"chip hover:variant-filled-surface [&:not(:hover)]:variant-soft":"")+" svelte-1c06ml2"),R(t,"selected",n[2]),$(x,"class","svelte-1c06ml2"),$(g,"class","card variant-filled-surface p-4 svelte-1c06ml2"),$(g,"data-popup",T=`popupHoverFor${n[0].id}`),oe(g,"z-index","1000")},m(d,v){b(d,t,v),q(t,a),q(a,e),q(a,i),b(d,p,v),b(d,g,v),q(g,x),q(x,k),A||(C=[ie(f=re.call(null,t,n[4])),fe(t,"click",n[5])],A=!0)},p(d,[v]){v&1&&c!==(c=d[0].name+"")&&W(i,c),v&8&&o!==(o=d[3]==="click"?"Click for tag information":"")&&$(a,"title",o),v&2&&s!==(s=Q(d[1]?"chip hover:variant-filled-surface [&:not(:hover)]:variant-soft":"")+" svelte-1c06ml2")&&$(t,"class",s),f&&ce(f.update)&&v&16&&f.update.call(null,d[4]),v&6&&R(t,"selected",d[2]),v&1&&E!==(E=d[0].description+"")&&W(k,E),v&1&&T!==(T=`popupHoverFor${d[0].id}`)&&$(g,"data-popup",T)},i:Z,o:Z,d(d){d&&(m(t),m(p),m(g)),A=!1,ue(C)}}}function be(n,t,a){let e,{tag:l}=t,{asButton:c=!1}=t,{selected:i=!1}=t,{popupTriggerEvent:o="click"}=t;function s(f){pe.call(this,n,f)}return n.$$set=f=>{"tag"in f&&a(0,l=f.tag),"asButton"in f&&a(1,c=f.asButton),"selected"in f&&a(2,i=f.selected),"popupTriggerEvent"in f&&a(3,o=f.popupTriggerEvent)},n.$$.update=()=>{n.$$.dirty&9&&a(4,e={event:o,target:`popupHoverFor${l.id}`,placement:"bottom-start"})},[l,c,i,o,e,s]}class Ie extends le{constructor(t){super(),ae(this,t,be,Te,se,{tag:0,asButton:1,selected:2,popupTriggerEvent:3})}}function _(n,t,a){const e=n.slice();return e[19]=t[a],e}function ke(n){let t,a="Tags",e,l,c,i,o,s,f,p,g,x,E,k;function T(u){n[11](u)}function A(u){n[12](u)}let C={name:"tags",chips:"variant-filled-primary"};n[4]!==void 0&&(C.input=n[4]),n[3]!==void 0&&(C.value=n[3]),c=new he({props:C}),H.push(()=>N(c,"input",T)),H.push(()=>N(c,"value",A)),c.$on("remove",n[13]);function d(u){n[15](u)}let v={options:n[5].filter(n[14])};return n[4]!==void 0&&(v.input=n[4]),p=new $e({props:v}),H.push(()=>N(p,"input",d)),p.$on("selection",n[16]),{c(){t=w("div"),t.textContent=a,e=O(),l=w("div"),j(c.$$.fragment),s=O(),f=w("div"),j(p.$$.fragment),this.h()},l(u){t=D(u,"DIV",{class:!0,"data-svelte-h":!0}),ne(t)!=="svelte-14odz2i"&&(t.textContent=a),e=P(u),l=D(u,"DIV",{});var h=B(l);S(c.$$.fragment,h),h.forEach(m),s=P(u),f=D(u,"DIV",{class:!0,tabindex:!0,"data-popup":!0});var r=B(f);S(p.$$.fragment,r),r.forEach(m),this.h()},h(){$(t,"class","mb-2"),$(f,"class","card max-h-48 w-max max-w-full overflow-y-auto p-4"),$(f,"tabindex","-1"),$(f,"data-popup","popupAutocomplete")},m(u,h){b(u,t,h),b(u,e,h),b(u,l,h),U(c,l,null),b(u,s,h),b(u,f,h),U(p,f,null),x=!0,E||(k=ie(re.call(null,l,n[7])),E=!0)},p(u,h){const r={};!i&&h&16&&(i=!0,r.input=u[4],z(()=>i=!1)),!o&&h&8&&(o=!0,r.value=u[3],z(()=>o=!1)),c.$set(r);const V={};h&40&&(V.options=u[5].filter(u[14])),!g&&h&16&&(g=!0,V.input=u[4],z(()=>g=!1)),p.$set(V)},i(u){x||(I(c.$$.fragment,u),I(p.$$.fragment,u),x=!0)},o(u){y(c.$$.fragment,u),y(p.$$.fragment,u),x=!1},d(u){u&&(m(t),m(e),m(l),m(s),m(f)),G(c),G(p),E=!1,k()}}}function we(n){let t,a,e=n[0].length>0&&ee(n);return{c(){e&&e.c(),t=X()},l(l){e&&e.l(l),t=X()},m(l,c){e&&e.m(l,c),b(l,t,c),a=!0},p(l,c){l[0].length>0?e?(e.p(l,c),c&1&&I(e,1)):(e=ee(l),e.c(),I(e,1),e.m(t.parentNode,t)):e&&(J(),y(e,1,1,()=>{e=null}),K())},i(l){a||(I(e),a=!0)},o(l){y(e),a=!1},d(l){l&&m(t),e&&e.d(l)}}}function ee(n){let t,a,e=Y(n[0]),l=[];for(let i=0;i<e.length;i+=1)l[i]=te(_(n,e,i));const c=i=>y(l[i],1,1,()=>{l[i]=null});return{c(){t=w("div");for(let i=0;i<l.length;i+=1)l[i].c();this.h()},l(i){t=D(i,"DIV",{class:!0});var o=B(t);for(let s=0;s<l.length;s+=1)l[s].l(o);o.forEach(m),this.h()},h(){$(t,"class","text-md flex flex-row flex-wrap gap-1")},m(i,o){b(i,t,o);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(t,null);a=!0},p(i,o){if(o&5){e=Y(i[0]);let s;for(s=0;s<e.length;s+=1){const f=_(i,e,s);l[s]?(l[s].p(f,o),I(l[s],1)):(l[s]=te(f),l[s].c(),I(l[s],1),l[s].m(t,null))}for(J(),s=e.length;s<l.length;s+=1)c(s);K()}},i(i){if(!a){for(let o=0;o<e.length;o+=1)I(l[o]);a=!0}},o(i){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)y(l[o]);a=!1},d(i){i&&m(t),xe(l,i)}}}function te(n){let t,a;return t=new Ie({props:{tag:n[19],popupTriggerEvent:n[2]}}),{c(){j(t.$$.fragment)},l(e){S(t.$$.fragment,e)},m(e,l){U(t,e,l),a=!0},p(e,l){const c={};l&1&&(c.tag=e[19]),l&4&&(c.popupTriggerEvent=e[2]),t.$set(c)},i(e){a||(I(t.$$.fragment,e),a=!0)},o(e){y(t.$$.fragment,e),a=!1},d(e){G(t,e)}}}function De(n){let t,a,e,l;const c=[we,ke],i=[];function o(s,f){return s[1]?1:0}return a=o(n),e=i[a]=c[a](n),{c(){t=w("div"),e.c(),this.h()},l(s){t=D(s,"DIV",{class:!0});var f=B(t);e.l(f),f.forEach(m),this.h()},h(){$(t,"class","tags")},m(s,f){b(s,t,f),i[a].m(t,null),l=!0},p(s,[f]){let p=a;a=o(s),a===p?i[a].p(s,f):(J(),y(i[p],1,1,()=>{i[p]=null}),K(),e=i[a],e?e.p(s,f):(e=i[a]=c[a](s),e.c()),I(e,1),e.m(t,null))},i(s){l||(I(e),l=!0)},o(s){y(e),l=!1},d(s){s&&m(t),i[a].d()}}}function Ve(n,t,a){let e,l;const c=de(),i=ge({query:Ee,client:c,variables:{limit:100}});ve(n,i,r=>a(10,l=r));let{tags:o=[]}=t,{editable:s=!1}=t,{popupTriggerEvent:f="click"}=t;const p={event:"focus-click",target:"popupAutocomplete",placement:"bottom-start"};let g=[];const x=()=>a(3,g=o.map(r=>r.name));me(x);const E=r=>{const V=l.data?.getTags?.find(F=>F.id==r.value);a(0,o=[...o,{id:r.value,name:V?.name,description:V?.description}]),x()},k=r=>{const V=o.findIndex(F=>F.name===r);a(0,o=[...o.slice(0,V),...o.slice(V+1)]),x()};let T="";function A(r){T=r,a(4,T)}function C(r){g=r,a(3,g)}const d=r=>k(r.detail.chipValue),v=r=>g.indexOf(r.name)<0;function u(r){T=r,a(4,T)}const h=r=>E(r.detail);return n.$$set=r=>{"tags"in r&&a(0,o=r.tags),"editable"in r&&a(1,s=r.editable),"popupTriggerEvent"in r&&a(2,f=r.popupTriggerEvent)},n.$$.update=()=>{n.$$.dirty&1024&&a(5,e=l.data?.getTags?.map(r=>({label:`${r.name} - ${r.description}`,value:r.id,name:r.name}))||[])},[o,s,f,g,T,e,i,p,E,k,l,A,C,d,v,u,h]}class Be extends le{constructor(t){super(),ae(this,t,Ve,De,se,{tags:0,editable:1,popupTriggerEvent:2})}}export{Be as T,Ie as a};
//# sourceMappingURL=TagList.HMv8OVRN.js.map
