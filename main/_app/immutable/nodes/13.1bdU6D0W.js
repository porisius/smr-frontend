import{S as Z,i as tt,s as et,b as N,a as j,e as b,C as at,f,g as q,c as G,d as S,F as B,G as V,I as y,j as _,W as rt,m as k,t as w,l as z,K as st,X as it,ae as nt,L as ot,A as X,D as Y,H as Q,J as R,k as A,q as C,r as lt,Y as K,O as U,T as F,U as J,V as ut}from"../chunks/vendor.qkHm75Lx.js";import{n as dt,o as ct}from"../chunks/graphql.XSrPrpK2.js";import{G as ft}from"../chunks/GuideForm.6lRUQZmx.js";import{M as gt}from"../chunks/MetaDescriptors.8buV-7cv.js";const mt=async({params:i})=>({...i}),Tt=Object.freeze(Object.defineProperty({__proto__:null,load:mt},Symbol.toStringTag,{value:"Module"}));function W(i){let e,s;return e=new gt({props:{description:"Editing guide '"+i[1].data.getGuide.short_description+"'",title:"Edit guide '"+i[1].data.getGuide.name+"'"}}),{c(){X(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,a){Q(e,t,a),s=!0},p(t,a){const n={};a&2&&(n.description="Editing guide '"+t[1].data.getGuide.short_description+"'"),a&2&&(n.title="Edit guide '"+t[1].data.getGuide.name+"'"),e.$set(n)},i(t){s||(k(e.$$.fragment,t),s=!0)},o(t){w(e.$$.fragment,t),s=!1},d(t){R(e,t)}}}function pt(i){let e,s;return e=new ft({props:{onSubmit:i[2],initialValues:i[1].data.getGuide,submitText:"Save",submitIcon:"save"}}),{c(){X(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,a){Q(e,t,a),s=!0},p(t,a){const n={};a&2&&(n.initialValues=t[1].data.getGuide),e.$set(n)},i(t){s||(k(e.$$.fragment,t),s=!0)},o(t){w(e.$$.fragment,t),s=!1},d(t){R(e,t)}}}function ht(i){let e,s,t=i[1].error.message+"",a;return{c(){e=b("p"),s=F("Oh no... "),a=F(t)},l(n){e=G(n,"P",{});var l=S(e);s=J(l,"Oh no... "),a=J(l,t),l.forEach(f)},m(n,l){_(n,e,l),y(e,s),y(e,a)},p(n,l){l&2&&t!==(t=n[1].error.message+"")&&ut(a,t)},i:C,o:C,d(n){n&&f(e)}}}function $t(i){let e,s="Loading...";return{c(){e=b("p"),e.textContent=s},l(t){e=G(t,"P",{"data-svelte-h":!0}),B(e)!=="svelte-qdsr2u"&&(e.textContent=s)},m(t,a){_(t,e,a)},p:C,i:C,o:C,d(t){t&&f(e)}}}function vt(i){let e,s,t,a,n="Edit Guide",l,E,g,O=`<span class="material-icons pr-2">arrow_back</span>
      Back to Guide`,x,p,h,u,d,I,m,T,o=!i[1].fetching&&!i[1].error&&i[1].data.getGuide&&W(i);const D=[$t,ht,pt],$=[];function H(r,c){return r[1].fetching?0:r[1].error?1:2}return u=H(i),d=$[u]=D[u](i),{c(){o&&o.c(),e=N(),s=j(),t=b("div"),a=b("h1"),a.textContent=n,l=j(),E=b("div"),g=b("button"),g.innerHTML=O,x=j(),p=b("div"),h=b("section"),d.c(),this.h()},l(r){const c=at("svelte-2z35li",document.head);o&&o.l(c),e=N(),c.forEach(f),s=q(r),t=G(r,"DIV",{class:!0});var v=S(t);a=G(v,"H1",{class:!0,"data-svelte-h":!0}),B(a)!=="svelte-1alq187"&&(a.textContent=n),l=q(v),E=G(v,"DIV",{});var M=S(E);g=G(M,"BUTTON",{class:!0,"data-svelte-h":!0}),B(g)!=="svelte-s0syem"&&(g.innerHTML=O),M.forEach(f),v.forEach(f),x=q(r),p=G(r,"DIV",{class:!0});var L=S(p);h=G(L,"SECTION",{});var P=S(h);d.l(P),P.forEach(f),L.forEach(f),this.h()},h(){V(a,"class","my-4 text-4xl font-bold"),V(g,"class","variant-ghost-primary btn"),V(t,"class","flex h-auto flex-wrap items-center justify-between"),V(p,"class","card p-4")},m(r,c){o&&o.m(document.head,null),y(document.head,e),_(r,s,c),_(r,t,c),y(t,a),y(t,l),y(t,E),y(E,g),_(r,x,c),_(r,p,c),y(p,h),$[u].m(h,null),I=!0,m||(T=rt(g,"click",i[7]),m=!0)},p(r,[c]){!r[1].fetching&&!r[1].error&&r[1].data.getGuide?o?(o.p(r,c),c&2&&k(o,1)):(o=W(r),o.c(),k(o,1),o.m(e.parentNode,e)):o&&(A(),w(o,1,1,()=>{o=null}),z());let v=u;u=H(r),u===v?$[u].p(r,c):(A(),w($[v],1,1,()=>{$[v]=null}),z(),d=$[u],d?d.p(r,c):(d=$[u]=D[u](r),d.c()),k(d,1),d.m(h,null))},i(r){I||(k(o),k(d),I=!0)},o(r){w(o),w(d),I=!1},d(r){r&&(f(s),f(t),f(x),f(p)),o&&o.d(r),f(e),$[u].d(),m=!1,T()}}}function bt(i,e,s){let t,a,n,l=C,E=()=>(l(),l=lt(a,m=>s(1,n=m)),a);i.$$.on_destroy.push(()=>l());let{data:g}=e;const O=st(),x=it(),p=m=>{O.mutation(ct,{guideId:t,guide:m}).toPromise().then(T=>{T.error?(console.error(T.error.message),x.trigger({message:"Error editing guide: "+T.error.message,background:"variant-filled-error",autohide:!1})):(x.trigger({message:"Guide updated",background:"variant-filled-success",timeout:5e3}),K(U+"/guide/"+T.data.updateGuide.id))})},h=()=>{K(U+"/guide/"+t)},u={type:"confirm",title:"Go Back?",buttonTextCancel:"Keep Editing",buttonTextConfirm:"Go Back",body:"Going back will discard any unsaved changes. Are you sure you wish to continue?",response:m=>{m&&h()}},d=nt(),I=()=>d.trigger(u);return i.$$set=m=>{"data"in m&&s(5,g=m.data)},i.$$.update=()=>{i.$$.dirty&32&&s(6,{guideId:t}=g,t),i.$$.dirty&64&&E(s(0,a=ot({query:dt,client:O,variables:{guide:t}})))},[a,n,p,u,d,g,t,I]}class kt extends Z{constructor(e){super(),tt(this,e,bt,vt,et,{data:5})}}export{kt as component,Tt as universal};
//# sourceMappingURL=13.1bdU6D0W.js.map
