import{D as ht,S as tt,i as et,s as at,e as m,P as M,a as O,c as p,d as b,Q as H,f,g as _,A as w,j as C,M as c,R as A,q as x,a5 as gt,r as rt,a0 as K,b as J,Y as mt,m as L,t as j,l as st,F as pt,C as vt,G as $t,ae as Et,I as Q,J as X,L as Y,O as W,k as lt,a7 as it,a1 as nt,a2 as yt,K as Z,N as ot,X as bt,a3 as wt,a4 as xt}from"../chunks/vendor.DEmYJEk3.js";import{l as It,y as Dt}from"../chunks/graphql.CfvMSMJ1.js";import{l as Gt}from"../chunks/gql.DGDorg1Q.js";import{p as ct}from"../chunks/formatting.Djc7f7Ia.js";import{u as Vt}from"../chunks/user.CfrGFbe4.js";import{m as ut}from"../chunks/markdown.D5tn1F8n.js";import{M as kt}from"../chunks/MetaDescriptors.BFFaHyA-.js";import{P as Tt}from"../chunks/Page404.DQABQ08r.js";const Nt=!1,Ot=async({params:r,parent:t})=>({...r,...await Gt({guide:ht({query:It,client:(await t()).client,variables:{guide:r.guideId}})})}),ee=Object.freeze(Object.defineProperty({__proto__:null,load:Ot,prerender:Nt},Symbol.toStringTag,{value:"Module"}));function _t(r){let t,s,e,a,l=r[2]("entry.info")+"",d,i,o,u,y=r[2]("entry.created-at")+"",n,h,I,G=ct(r[0].created_at)+"",D,T;return{c(){t=m("div"),s=m("section"),e=m("div"),a=m("h3"),d=M(l),i=O(),o=m("span"),u=m("strong"),n=M(y),h=M(":"),I=O(),D=M(G),T=m("br"),this.h()},l(k){t=p(k,"DIV",{class:!0});var g=b(t);s=p(g,"SECTION",{});var N=b(s);e=p(N,"DIV",{class:!0});var $=b(e);a=p($,"H3",{class:!0});var V=b(a);d=H(V,l),V.forEach(f),i=_($),o=p($,"SPAN",{});var v=b(o);u=p(v,"STRONG",{});var E=b(u);n=H(E,y),h=H(E,":"),E.forEach(f),I=_(v),D=H(v,G),v.forEach(f),T=p($,"BR",{}),$.forEach(f),N.forEach(f),g.forEach(f),this.h()},h(){w(a,"class","my-4 text-2xl font-bold"),w(e,"class","text-lg"),w(t,"class","card p-4")},m(k,g){C(k,t,g),c(t,s),c(s,e),c(e,a),c(a,d),c(e,i),c(e,o),c(o,u),c(u,n),c(u,h),c(o,I),c(o,D),c(e,T)},p(k,[g]){g&4&&l!==(l=k[2]("entry.info")+"")&&A(d,l),g&4&&y!==(y=k[2]("entry.created-at")+"")&&A(n,y),g&1&&G!==(G=ct(k[0].created_at)+"")&&A(D,G)},i:x,o:x,d(k){k&&f(t)}}}function Ct(r,t,s){let e,a=x,l=()=>(a(),a=rt(i,o=>s(2,e=o)),i);r.$$.on_destroy.push(()=>a());let{guide:d}=t;const{t:i}=gt();return l(),r.$$set=o=>{"guide"in o&&s(0,d=o.guide)},[d,i,e]}class Pt extends tt{constructor(t){super(),et(this,t,Ct,_t,at,{guide:0,t:1})}get t(){return this.$$.ctx[1]}}function St(r){let t,s,e,a,l=r[2]("author")+"",d,i,o,u,y,n,h,I,G,D=r[0].username+"",T,k,g,N,$=r[2]("role.writer")+"",V;return{c(){t=m("div"),s=m("section"),e=m("div"),a=m("h3"),d=M(l),i=O(),o=m("div"),u=m("div"),y=m("div"),h=O(),I=m("div"),G=m("a"),T=M(D),g=O(),N=m("div"),V=M($),this.h()},l(v){t=p(v,"DIV",{class:!0});var E=b(t);s=p(E,"SECTION",{});var P=b(s);e=p(P,"DIV",{class:!0});var S=b(e);a=p(S,"H3",{class:!0});var U=b(a);d=H(U,l),U.forEach(f),i=_(S),o=p(S,"DIV",{class:!0});var q=b(o);u=p(q,"DIV",{class:!0});var B=b(u);y=p(B,"DIV",{class:!0,style:!0}),b(y).forEach(f),h=_(B),I=p(B,"DIV",{class:!0});var R=b(I);G=p(R,"A",{href:!0,class:!0});var F=b(G);T=H(F,D),F.forEach(f),g=_(R),N=p(R,"DIV",{});var z=b(N);V=H(z,$),z.forEach(f),R.forEach(f),B.forEach(f),q.forEach(f),S.forEach(f),P.forEach(f),E.forEach(f),this.h()},h(){w(a,"class","my-4 text-2xl font-bold"),w(y,"class","h-14 w-14 rounded-full bg-cover"),w(y,"style",n=`background-image: url("${r[0].avatar}")`),w(G,"href",k=K+"/user/"+r[0].id+"/"),w(G,"class","text-yellow-500 underline"),w(I,"class","grid grid-flow-row"),w(u,"class","grid auto-cols-min grid-flow-col gap-x-4"),w(o,"class","grid auto-rows-min gap-y-4 text-lg"),w(e,"class","grid grid-flow-row gap-y-2"),w(t,"class","card p-4")},m(v,E){C(v,t,E),c(t,s),c(s,e),c(e,a),c(a,d),c(e,i),c(e,o),c(o,u),c(u,y),c(u,h),c(u,I),c(I,G),c(G,T),c(I,g),c(I,N),c(N,V)},p(v,[E]){E&4&&l!==(l=v[2]("author")+"")&&A(d,l),E&1&&n!==(n=`background-image: url("${v[0].avatar}")`)&&w(y,"style",n),E&1&&D!==(D=v[0].username+"")&&A(T,D),E&1&&k!==(k=K+"/user/"+v[0].id+"/")&&w(G,"href",k),E&4&&$!==($=v[2]("role.writer")+"")&&A(V,$)},i:x,o:x,d(v){v&&f(t)}}}function Mt(r,t,s){let e,a=x,l=()=>(a(),a=rt(i,o=>s(2,e=o)),i);r.$$.on_destroy.push(()=>a());let{author:d}=t;const{t:i}=gt();return l(),r.$$set=o=>{"author"in o&&s(0,d=o.author)},[d,i,e]}class Ht extends tt{constructor(t){super(),et(this,t,Mt,St,at,{author:0,t:1})}get t(){return this.$$.ctx[1]}}function dt(r){let t,s;return t=new kt({props:{description:r[0].data.getGuide.short_description,title:r[0].data.getGuide.name}}),{c(){Q(t.$$.fragment)},l(e){X(t.$$.fragment,e)},m(e,a){Y(t,e,a),s=!0},p(e,a){const l={};a&1&&(l.description=e[0].data.getGuide.short_description),a&1&&(l.title=e[0].data.getGuide.name),t.$set(l)},i(e){s||(L(t.$$.fragment,e),s=!0)},o(e){j(t.$$.fragment,e),s=!1},d(e){W(t,e)}}}function Lt(r){let t,s;return t=new Tt({}),{c(){Q(t.$$.fragment)},l(e){X(t.$$.fragment,e)},m(e,a){Y(t,e,a),s=!0},p:x,i(e){s||(L(t.$$.fragment,e),s=!0)},o(e){j(t.$$.fragment,e),s=!1},d(e){W(t,e)}}}function jt(r){let t,s,e,a=r[0].data.getGuide.name+"",l,d,i,o,u,y,n,h,I,G,D,T,k,g,N,$=r[2]&&ft(r),V={ctx:r,current:null,token:null,hasCatch:!1,pending:zt,then:Rt,catch:Bt,value:13};return nt(I=ut(r[0].data.getGuide.guide),V),T=new Pt({props:{guide:r[0].data.getGuide}}),g=new Ht({props:{author:r[0].data.getGuide.user}}),{c(){t=m("div"),s=m("div"),e=m("h1"),l=M(a),d=O(),i=m("div"),$&&$.c(),o=O(),u=m("div"),y=m("div"),n=m("section"),h=m("div"),V.block.c(),G=O(),D=m("div"),Q(T.$$.fragment),k=O(),Q(g.$$.fragment),this.h()},l(v){t=p(v,"DIV",{class:!0});var E=b(t);s=p(E,"DIV",{class:!0});var P=b(s);e=p(P,"H1",{class:!0});var S=b(e);l=H(S,a),S.forEach(f),d=_(P),i=p(P,"DIV",{});var U=b(i);$&&$.l(U),U.forEach(f),P.forEach(f),o=_(E),u=p(E,"DIV",{class:!0});var q=b(u);y=p(q,"DIV",{class:!0});var B=b(y);n=p(B,"SECTION",{});var R=b(n);h=p(R,"DIV",{class:!0});var F=b(h);V.block.l(F),F.forEach(f),R.forEach(f),B.forEach(f),G=_(q),D=p(q,"DIV",{class:!0});var z=b(D);X(T.$$.fragment,z),k=_(z),X(g.$$.fragment,z),z.forEach(f),q.forEach(f),E.forEach(f),this.h()},h(){w(e,"class","text-4xl font-bold"),w(s,"class","flex h-auto flex-wrap items-center justify-between"),w(h,"class","markdown-content break-words"),w(y,"class","card h-fit p-4"),w(D,"class","grid auto-rows-min grid-cols-1 gap-8"),w(u,"class","grid-auto-max grid auto-cols-fr gap-4"),w(t,"class","grid gap-6 xlx:grid-flow-row")},m(v,E){C(v,t,E),c(t,s),c(s,e),c(e,l),c(s,d),c(s,i),$&&$.m(i,null),c(t,o),c(t,u),c(u,y),c(y,n),c(n,h),V.block.m(h,V.anchor=null),V.mount=()=>h,V.anchor=null,c(u,G),c(u,D),Y(T,D,null),c(D,k),Y(g,D,null),N=!0},p(v,E){r=v,(!N||E&1)&&a!==(a=r[0].data.getGuide.name+"")&&A(l,a),r[2]?$?$.p(r,E):($=ft(r),$.c(),$.m(i,null)):$&&($.d(1),$=null),V.ctx=r,E&1&&I!==(I=ut(r[0].data.getGuide.guide))&&nt(I,V)||yt(V,r,E);const P={};E&1&&(P.guide=r[0].data.getGuide),T.$set(P);const S={};E&1&&(S.author=r[0].data.getGuide.user),g.$set(S)},i(v){N||(L(T.$$.fragment,v),L(g.$$.fragment,v),N=!0)},o(v){j(T.$$.fragment,v),j(g.$$.fragment,v),N=!1},d(v){v&&f(t),$&&$.d(),V.block.d(),V.token=null,V=null,W(T),W(g)}}}function At(r){let t,s,e=r[0].error.message+"",a;return{c(){t=m("p"),s=M("Oh no... "),a=M(e)},l(l){t=p(l,"P",{});var d=b(t);s=H(d,"Oh no... "),a=H(d,e),d.forEach(f)},m(l,d){C(l,t,d),c(t,s),c(t,a)},p(l,d){d&1&&e!==(e=l[0].error.message+"")&&A(a,e)},i:x,o:x,d(l){l&&f(t)}}}function qt(r){let t,s="Loading...";return{c(){t=m("p"),t.textContent=s},l(e){t=p(e,"P",{"data-svelte-h":!0}),Z(t)!=="svelte-qdsr2u"&&(t.textContent=s)},m(e,a){C(e,t,a)},p:x,i:x,o:x,d(e){e&&f(t)}}}function ft(r){let t,s=`<span class="material-icons pr-2">edit</span>
            Edit`,e,a,l=`<span class="material-icons pr-2">delete</span>
            Delete`,d,i;return{c(){t=m("button"),t.innerHTML=s,e=O(),a=m("button"),a.innerHTML=l,this.h()},l(o){t=p(o,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(t)!=="svelte-5sm84g"&&(t.innerHTML=s),e=_(o),a=p(o,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(a)!=="svelte-1tg2z3n"&&(a.innerHTML=l),this.h()},h(){w(t,"class","variant-ghost-primary btn"),w(a,"class","variant-ghost-primary btn")},m(o,u){C(o,t,u),C(o,e,u),C(o,a,u),d||(i=[ot(t,"click",r[8]),ot(a,"click",r[9])],d=!0)},p:x,d(o){o&&(f(t),f(e),f(a)),d=!1,bt(i)}}}function Bt(r){return{c:x,l:x,m:x,p:x,d:x}}function Rt(r){let t,s,e=r[13]+"";return{c(){t=m("p"),s=new wt(!1),this.h()},l(a){t=p(a,"P",{});var l=b(t);s=xt(l,!1),l.forEach(f),this.h()},h(){s.a=null},m(a,l){C(a,t,l),s.m(e,t)},p(a,l){l&1&&e!==(e=a[13]+"")&&s.p(e)},d(a){a&&f(t)}}}function zt(r){return{c:x,l:x,m:x,p:x,d:x}}function Ut(r){let t,s,e,a,l,d,i=!r[0].fetching&&!r[0].error&&r[0].data.getGuide&&dt(r);const o=[qt,At,jt,Lt],u=[];function y(n,h){return n[0].fetching?0:n[0].error?1:n[0].data.getGuide?2:3}return e=y(r),a=u[e]=o[e](r),{c(){i&&i.c(),t=J(),s=O(),a.c(),l=J()},l(n){const h=mt("svelte-bhfvpi",document.head);i&&i.l(h),t=J(),h.forEach(f),s=_(n),a.l(n),l=J()},m(n,h){i&&i.m(document.head,null),c(document.head,t),C(n,s,h),u[e].m(n,h),C(n,l,h),d=!0},p(n,[h]){!n[0].fetching&&!n[0].error&&n[0].data.getGuide?i?(i.p(n,h),h&1&&L(i,1)):(i=dt(n),i.c(),L(i,1),i.m(t.parentNode,t)):i&&(lt(),j(i,1,1,()=>{i=null}),st());let I=e;e=y(n),e===I?u[e].p(n,h):(lt(),j(u[I],1,1,()=>{u[I]=null}),st(),a=u[e],a?a.p(n,h):(a=u[e]=o[e](n),a.c()),L(a,1),a.m(l.parentNode,l))},i(n){d||(L(i),L(a),d=!0)},o(n){j(i),j(a),d=!1},d(n){n&&(f(s),f(l)),i&&i.d(n),f(t),u[e].d(n)}}}function Ft(r,t,s){let e,a,l,d,i=x,o=()=>(i(),i=rt(a,g=>s(0,d=g)),a),u;pt(r,Vt,g=>s(7,u=g)),r.$$.on_destroy.push(()=>i());let{data:y}=t;const n=vt(),h=$t(),I=()=>{n.mutation(Dt,{guideId:e}).toPromise().then(g=>{g.error?(console.error(g.error.message),h.trigger({message:"Error deleting guide: "+g.error.message,background:"variant-filled-error",autohide:!1})):(h.trigger({message:"Guide deleted",background:"variant-filled-success",timeout:5e3}),it(K+"/guides"))})},G={type:"confirm",title:"Delete Guide?",body:"Are you sure you wish to delete this guide?",response:g=>{g&&I()}},D=Et(),T=()=>it(K+"/guide/"+e+"/edit"),k=()=>D.trigger(G);return r.$$set=g=>{"data"in g&&s(6,y=g.data)},r.$$.update=()=>{r.$$.dirty&64&&s(1,{guideId:e,guide:a}=y,e,o(s(3,a))),r.$$.dirty&129&&s(2,l=u?.roles?.deleteContent||u?.id===d?.data?.getGuide?.user?.id)},[d,e,l,a,G,D,y,u,T,k]}class ae extends tt{constructor(t){super(),et(this,t,Ft,Ut,at,{data:6})}}export{ae as component,ee as universal};
//# sourceMappingURL=11.B50a2SaV.js.map
