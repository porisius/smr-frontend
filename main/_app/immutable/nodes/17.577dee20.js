import{S as D,i as G,s as H,bh as J,p as K,P as R,e as O,R as L,u as T,I as x,U as P,a_ as U,d as $,V as j,v as V,w as q,J as S,X as _,Y as X,Z as v,a as y,_ as w,b as g,t as h,c as F,a4 as Y,a5 as M,aD as Z,aF as B,bi as C,g as k,L as b,ar as Q,aG as W,aN as ee,K as A}from"../chunks/vendor.d823cc42.js";import{u as te,y as re}from"../chunks/graphql.22d32a05.js";import{T as ae}from"../chunks/Toast.707b4ed9.js";import{M as ne}from"../chunks/ModForm.0dc00d8d.js";import{M as oe}from"../chunks/MetaDescriptors.852d1294.js";const ie=async({params:o})=>({...o}),be=Object.freeze(Object.defineProperty({__proto__:null,load:ie},Symbol.toStringTag,{value:"Module"}));function z(o){let t,r;return t=new oe({props:{description:"Editing mod "+o[1].data.mod.name,title:"Edit mod "+o[1].data.mod.name,image:o[1].data.mod.logo}}),{c(){P(t.$$.fragment)},l(e){_(t.$$.fragment,e)},m(e,a){w(t,e,a),r=!0},p(e,a){const s={};a&2&&(s.description="Editing mod "+e[1].data.mod.name),a&2&&(s.title="Edit mod "+e[1].data.mod.name),a&2&&(s.image=e[1].data.mod.logo),t.$set(s)},i(e){r||(g(t.$$.fragment,e),r=!0)},o(e){h(t.$$.fragment,e),r=!1},d(e){M(t,e)}}}function se(o){let t,r;return t=new ne({props:{onSubmit:o[5],initialValues:o[3],editing:!0,submitText:"Save"}}),{c(){P(t.$$.fragment)},l(e){_(t.$$.fragment,e)},m(e,a){w(t,e,a),r=!0},p(e,a){const s={};a&8&&(s.initialValues=e[3]),t.$set(s)},i(e){r||(g(t.$$.fragment,e),r=!0)},o(e){h(t.$$.fragment,e),r=!1},d(e){M(t,e)}}}function fe(o){let t,r,e=o[1].error.message+"",a;return{c(){t=T("p"),r=x("Oh no... "),a=x(e)},l(s){t=V(s,"P",{});var i=q(t);r=S(i,"Oh no... "),a=S(i,e),i.forEach($)},m(s,i){y(s,t,i),v(t,r),v(t,a)},p(s,i){i&2&&e!==(e=s[1].error.message+"")&&A(a,e)},i:b,o:b,d(s){s&&$(t)}}}function de(o){let t,r;return{c(){t=T("p"),r=x("Loading...")},l(e){t=V(e,"P",{});var a=q(t);r=S(a,"Loading..."),a.forEach($)},m(e,a){y(e,t,a),v(t,r)},p:b,i:b,o:b,d(e){e&&$(t)}}}function le(o){let t,r,e,a;const s=[de,fe,se],i=[];function u(f,m){return f[1].fetching?0:f[1].error?1:2}return t=u(o),r=i[t]=s[t](o),{c(){r.c(),e=O()},l(f){r.l(f),e=O()},m(f,m){i[t].m(f,m),y(f,e,m),a=!0},p(f,m){let c=t;t=u(f),t===c?i[t].p(f,m):(k(),h(i[c],1,1,()=>{i[c]=null}),F(),r=i[t],r?r.p(f,m):(r=i[t]=s[t](f),r.c()),g(r,1),r.m(e.parentNode,e))},i(f){a||(g(r),a=!0)},o(f){h(r),a=!1},d(f){i[t].d(f),f&&$(e)}}}function me(o){let t,r;return t=new C({props:{$$slots:{default:[le]},$$scope:{ctx:o}}}),{c(){P(t.$$.fragment)},l(e){_(t.$$.fragment,e)},m(e,a){w(t,e,a),r=!0},p(e,a){const s={};a&1034&&(s.$$scope={dirty:a,ctx:e}),t.$set(s)},i(e){r||(g(t.$$.fragment,e),r=!0)},o(e){h(t.$$.fragment,e),r=!1},d(e){M(t,e)}}}function $e(o){let t,r;return{c(){t=T("span"),r=x(o[2])},l(e){t=V(e,"SPAN",{});var a=q(t);r=S(a,o[2]),a.forEach($)},m(e,a){y(e,t,a),v(t,r)},p(e,a){a&4&&A(r,e[2])},d(e){e&&$(t)}}}function ue(o){let t,r,e,a,s,i,u,f,m,c,l=!o[1].fetching&&!o[1].error&&o[1].data.mod&&z(o);i=new J({props:{$$slots:{default:[me]},$$scope:{ctx:o}}});function E(n){o[8](n)}let N={$$slots:{default:[$e]},$$scope:{ctx:o}};return o[0]!==void 0&&(N.running=o[0]),f=new ae({props:N}),K.push(()=>R(f,"running",E)),{c(){l&&l.c(),t=O(),r=L(),e=T("h1"),a=x("Edit Mod"),s=L(),P(i.$$.fragment),u=L(),P(f.$$.fragment),this.h()},l(n){const d=U("svelte-q8g25b",document.head);l&&l.l(d),t=O(),d.forEach($),r=j(n),e=V(n,"H1",{class:!0});var p=q(e);a=S(p,"Edit Mod"),p.forEach($),s=j(n),_(i.$$.fragment,n),u=j(n),_(f.$$.fragment,n),this.h()},h(){X(e,"class","text-4xl my-4 font-bold")},m(n,d){l&&l.m(document.head,null),v(document.head,t),y(n,r,d),y(n,e,d),v(e,a),y(n,s,d),w(i,n,d),y(n,u,d),w(f,n,d),c=!0},p(n,[d]){!n[1].fetching&&!n[1].error&&n[1].data.mod?l?(l.p(n,d),d&2&&g(l,1)):(l=z(n),l.c(),g(l,1),l.m(t.parentNode,t)):l&&(k(),h(l,1,1,()=>{l=null}),F());const p={};d&1034&&(p.$$scope={dirty:d,ctx:n}),i.$set(p);const I={};d&1028&&(I.$$scope={dirty:d,ctx:n}),!m&&d&1&&(m=!0,I.running=n[0],Y(()=>m=!1)),f.$set(I)},i(n){c||(g(l),g(i.$$.fragment,n),g(f.$$.fragment,n),c=!0)},o(n){h(l),h(i.$$.fragment,n),h(f.$$.fragment,n),c=!1},d(n){l&&l.d(n),$(t),n&&$(r),n&&$(e),n&&$(s),M(i,n),n&&$(u),M(f,n)}}}function ce(o,t,r){let e,a,s,i,u=b,f=()=>(u(),u=Q(a,d=>r(1,i=d)),a);o.$$.on_destroy.push(()=>u());let{data:m}=t;const c=Z();let l="",E=!1;const N=d=>{c.mutation(re,{modId:i.data.mod.id,mod:d}).toPromise().then(p=>{p.error?(console.error(p.error.message),r(2,l="Error editing mod: "+p.error.message),r(0,E=!0)):W(ee+"/mod/"+p.data.updateMod.id)})};function n(d){E=d,r(0,E)}return o.$$set=d=>{"data"in d&&r(6,m=d.data)},o.$$.update=()=>{o.$$.dirty&64&&r(7,{modId:e}=m,e),o.$$.dirty&128&&f(r(4,a=B({query:te,client:c,variables:{mod:e}}))),o.$$.dirty&1&&(E||r(2,l="")),o.$$.dirty&2&&r(3,s=i.data?{...i.data.mod,logo:void 0}:void 0)},[E,i,l,s,a,N,m,e,n]}class ve extends D{constructor(t){super(),G(this,t,ce,ue,H,{data:6})}}export{ve as component,be as universal};
//# sourceMappingURL=17.577dee20.js.map
