import{S as et,i as at,s as rt,bh as st,p as Y,P as Z,U as _,R as T,u as w,I as k,a_ as nt,X as j,d as u,V as U,v as E,w as S,J as q,Y as x,_ as J,a as b,Z as d,a4 as Q,b as I,t as V,a5 as M,a9 as lt,aD as it,bi as ot,L as C,e as W,g as ft,c as $t,K as H,aG as ut,aN as ct,ar as mt,aJ as pt,y as gt}from"../chunks/vendor.d823cc42.js";import{W as dt}from"../chunks/graphql.22d32a05.js";import{T as ht}from"../chunks/Toast.707b4ed9.js";import{o as vt,b as xt,d as yt,s as wt,c as Et,v as St,r as bt,V as X,T as Pt}from"../chunks/forms.524f0aa9.js";import{t as At}from"../chunks/forms.d8a5da8b.js";import{a as It}from"../chunks/user.4f18f4c3.js";import{M as Vt}from"../chunks/MetaDescriptors.852d1294.js";function Nt(l){let t,e,a,r,i,$,c,n,m,h,v,g,s,p,o,P,A,L,B,F,G;m=new X({props:{for:"avatar",$$slots:{default:[Lt,({messages:f})=>({10:f}),({messages:f})=>f?1024:0]},$$scope:{ctx:l}}});function tt(f){l[7](f)}let K={label:"Username",required:!0};return l[5].username!==void 0&&(K.value=l[5].username),g=new Pt({props:K}),Y.push(()=>Z(g,"value",tt)),o=new X({props:{for:"username",$$slots:{default:[Tt,({messages:f})=>({10:f}),({messages:f})=>f?1024:0]},$$scope:{ctx:l}}}),L=new pt({props:{type:"submit",variant:"outlined",$$slots:{default:[Ut]},$$scope:{ctx:l}}}),{c(){t=w("form"),e=w("div"),a=w("div"),r=w("label"),i=k("Avatar:"),$=T(),c=w("input"),n=T(),_(m.$$.fragment),h=T(),v=w("div"),_(g.$$.fragment),p=T(),_(o.$$.fragment),P=T(),A=w("div"),_(L.$$.fragment),this.h()},l(f){t=E(f,"FORM",{});var y=S(t);e=E(y,"DIV",{class:!0});var N=S(e);a=E(N,"DIV",{class:!0});var D=S(a);r=E(D,"LABEL",{for:!0});var z=S(r);i=q(z,"Avatar:"),z.forEach(u),$=U(D),c=E(D,"INPUT",{id:!0,class:!0,name:!0,type:!0,accept:!0,placeholder:!0}),n=U(D),j(m.$$.fragment,D),D.forEach(u),h=U(N),v=E(N,"DIV",{class:!0});var R=S(v);j(g.$$.fragment,R),p=U(R),j(o.$$.fragment,R),R.forEach(u),P=U(N),A=E(N,"DIV",{});var O=S(A);j(L.$$.fragment,O),O.forEach(u),N.forEach(u),y.forEach(u),this.h()},h(){x(r,"for","avatar"),x(c,"id","avatar"),x(c,"class","base-input"),x(c,"name","avatar"),x(c,"type","file"),x(c,"accept","image/png,image/jpeg,image/gif"),x(c,"placeholder","Avatar"),x(a,"class","grid grid-flow-row gap-2"),x(v,"class","grid grid-flow-row gap-2"),x(e,"class","grid grid-flow-row gap-6")},m(f,y){b(f,t,y),d(t,e),d(e,a),d(a,r),d(r,i),d(a,$),d(a,c),d(a,n),J(m,a,null),d(e,h),d(e,v),J(g,v,null),d(v,p),J(o,v,null),d(e,P),d(e,A),J(L,A,null),B=!0,F||(G=gt(l[4].call(null,t)),F=!0)},p(f,y){const N={};y&3072&&(N.$$scope={dirty:y,ctx:f}),m.$set(N);const D={};!s&&y&32&&(s=!0,D.value=f[5].username,Q(()=>s=!1)),g.$set(D);const z={};y&3072&&(z.$$scope={dirty:y,ctx:f}),o.$set(z);const R={};y&2048&&(R.$$scope={dirty:y,ctx:f}),L.$set(R)},i(f){B||(I(m.$$.fragment,f),I(g.$$.fragment,f),I(o.$$.fragment,f),I(L.$$.fragment,f),B=!0)},o(f){V(m.$$.fragment,f),V(g.$$.fragment,f),V(o.$$.fragment,f),V(L.$$.fragment,f),B=!1},d(f){f&&u(t),M(m),M(g),M(o),M(L),F=!1,G()}}}function Dt(l){let t,e;return{c(){t=w("p"),e=k("Please log in")},l(a){t=E(a,"P",{});var r=S(t);e=q(r,"Please log in"),r.forEach(u)},m(a,r){b(a,t,r),d(t,e)},p:C,i:C,o:C,d(a){a&&u(t)}}}function Lt(l){let t,e=(l[10]||"")+"",a;return{c(){t=w("span"),a=k(e),this.h()},l(r){t=E(r,"SPAN",{class:!0});var i=S(t);a=q(i,e),i.forEach(u),this.h()},h(){x(t,"class","validation-message")},m(r,i){b(r,t,i),d(t,a)},p(r,i){i&1024&&e!==(e=(r[10]||"")+"")&&H(a,e)},d(r){r&&u(t)}}}function Tt(l){let t,e=(l[10]||"")+"",a;return{c(){t=w("span"),a=k(e),this.h()},l(r){t=E(r,"SPAN",{class:!0});var i=S(t);a=q(i,e),i.forEach(u),this.h()},h(){x(t,"class","validation-message")},m(r,i){b(r,t,i),d(t,a)},p(r,i){i&1024&&e!==(e=(r[10]||"")+"")&&H(a,e)},d(r){r&&u(t)}}}function Ut(l){let t;return{c(){t=k("Save")},l(e){t=q(e,"Save")},m(e,a){b(e,t,a)},d(e){e&&u(t)}}}function _t(l){let t,e,a,r;const i=[Dt,Nt],$=[];function c(n,m){return n[2]===null?0:1}return t=c(l),e=$[t]=i[t](l),{c(){e.c(),a=W()},l(n){e.l(n),a=W()},m(n,m){$[t].m(n,m),b(n,a,m),r=!0},p(n,m){let h=t;t=c(n),t===h?$[t].p(n,m):(ft(),V($[h],1,1,()=>{$[h]=null}),$t(),e=$[t],e?e.p(n,m):(e=$[t]=i[t](n),e.c()),I(e,1),e.m(a.parentNode,a))},i(n){r||(I(e),r=!0)},o(n){V(e),r=!1},d(n){$[t].d(n),n&&u(a)}}}function jt(l){let t,e;return t=new ot({props:{$$slots:{default:[_t]},$$scope:{ctx:l}}}),{c(){_(t.$$.fragment)},l(a){j(t.$$.fragment,a)},m(a,r){J(t,a,r),e=!0},p(a,r){const i={};r&2084&&(i.$$scope={dirty:r,ctx:a}),t.$set(i)},i(a){e||(I(t.$$.fragment,a),e=!0)},o(a){V(t.$$.fragment,a),e=!1},d(a){M(t,a)}}}function Jt(l){let t,e;return{c(){t=w("span"),e=k(l[3])},l(a){t=E(a,"SPAN",{});var r=S(t);e=q(r,l[3]),r.forEach(u)},m(a,r){b(a,t,r),d(t,e)},p(a,r){r&8&&H(e,a[3])},d(a){a&&u(t)}}}function Mt(l){let t,e,a,r,i,$,c,n,m,h;t=new Vt({props:{description:"Change your user settings",title:"Settings"}}),$=new st({props:{$$slots:{default:[jt]},$$scope:{ctx:l}}});function v(s){l[8](s)}let g={$$slots:{default:[Jt]},$$scope:{ctx:l}};return l[0]!==void 0&&(g.running=l[0]),n=new ht({props:g}),Y.push(()=>Z(n,"running",v)),{c(){_(t.$$.fragment),e=T(),a=w("h1"),r=k("Settings"),i=T(),_($.$$.fragment),c=T(),_(n.$$.fragment),this.h()},l(s){const p=nt("svelte-1ae5i2c",document.head);j(t.$$.fragment,p),p.forEach(u),e=U(s),a=E(s,"H1",{class:!0});var o=S(a);r=q(o,"Settings"),o.forEach(u),i=U(s),j($.$$.fragment,s),c=U(s),j(n.$$.fragment,s),this.h()},h(){x(a,"class","text-4xl my-4 font-bold")},m(s,p){J(t,document.head,null),b(s,e,p),b(s,a,p),d(a,r),b(s,i,p),J($,s,p),b(s,c,p),J(n,s,p),h=!0},p(s,[p]){const o={};p&2084&&(o.$$scope={dirty:p,ctx:s}),$.$set(o);const P={};p&2056&&(P.$$scope={dirty:p,ctx:s}),!m&&p&1&&(m=!0,P.running=s[0],Q(()=>m=!1)),n.$set(P)},i(s){h||(I(t.$$.fragment,s),I($.$$.fragment,s),I(n.$$.fragment,s),h=!0)},o(s){V(t.$$.fragment,s),V($.$$.fragment,s),V(n.$$.fragment,s),h=!1},d(s){M(t),s&&u(e),s&&u(a),s&&u(i),M($,s),s&&u(c),M(n,s)}}}function Rt(l,t,e){let a,r,i=C,$=()=>(i(),i=mt(g,o=>e(5,r=o)),g);lt(l,It,o=>e(2,a=o)),l.$$.on_destroy.push(()=>i());let c="",n=!1;const m=it(),h=vt({avatar:xt(yt().refine(o=>"name"in o&&"size"in o&&"type"in o)),username:wt().min(3).max(32)});let v,g;function s(o){l.$$.not_equal(r.username,o)&&(r.username=o,g.set(r))}function p(o){n=o,e(0,n),e(2,a),e(1,g)}return l.$$.update=()=>{if(l.$$.dirty&6&&a&&!g){const o=Et({initialValues:{username:a.username},extend:[St({schema:h}),bt],onSubmit:P=>{console.log("submitted",P),m.mutation(dt,{user:At(P,h),userId:a.id}).toPromise().then(A=>{A.error?(console.error(A.error.message),e(3,c="Error editing user: "+A.error.message),e(0,n=!0)):ut(ct+"/user/"+A.data.updateUser.id)})}});e(4,v=o.form),$(e(1,g=o.data))}l.$$.dirty&1&&(n||e(3,c=""))},[n,g,a,c,v,r,h,s,p]}class Gt extends et{constructor(t){super(),at(this,t,Rt,Mt,rt,{userSchema:6})}get userSchema(){return this.$$.ctx[6]}}export{Gt as component};
//# sourceMappingURL=26.7986fc4a.js.map
