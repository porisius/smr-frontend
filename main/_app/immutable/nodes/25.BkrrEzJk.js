import{S as Z,i as tt,s as et,I as B,a as A,e as x,Y as at,J as F,f as h,g as L,c as b,K as k,d as w,A as v,L as R,j as N,M as g,t as M,l as st,m as T,O as G,F as rt,G as lt,C as nt,k as it,q as O,a7 as ot,a0 as ut,W as Q,N as ct,a8 as ft,X as mt,P as X,Q as Y,R as _,r as dt}from"../chunks/vendor.DEmYJEk3.js";import{k as pt}from"../chunks/graphql.CfvMSMJ1.js";import{o as gt,a as ht,b as $t,s as vt,c as xt,v as bt,r as yt,V as W}from"../chunks/forms.DJxVwYfD.js";import{t as Et}from"../chunks/forms.CFqyFbfT.js";import{u as Ct}from"../chunks/user.CfrGFbe4.js";import{M as It}from"../chunks/MetaDescriptors.BFFaHyA-.js";function St(c){let t,a,e,s,l="Avatar:",y,f,d,n,E,p,m,o,r="Username",u,$,V,P,q,D,J='<button class="variant-ghost-primary btn" type="submit">Save</button>',U,z,K;return n=new W({props:{for:"avatar",$$slots:{default:[Pt,({messages:i})=>({8:i}),({messages:i})=>i?256:0]},$$scope:{ctx:c}}}),P=new W({props:{for:"username",$$slots:{default:[At,({messages:i})=>({8:i}),({messages:i})=>i?256:0]},$$scope:{ctx:c}}}),{c(){t=x("form"),a=x("div"),e=x("div"),s=x("label"),s.textContent=l,y=A(),f=x("input"),d=A(),B(n.$$.fragment),E=A(),p=x("div"),m=x("label"),o=x("span"),o.textContent=r,u=A(),$=x("input"),V=A(),B(P.$$.fragment),q=A(),D=x("div"),D.innerHTML=J,this.h()},l(i){t=b(i,"FORM",{});var C=w(t);a=b(C,"DIV",{class:!0});var I=w(a);e=b(I,"DIV",{class:!0});var S=w(e);s=b(S,"LABEL",{for:!0,"data-svelte-h":!0}),k(s)!=="svelte-1a2u3bg"&&(s.textContent=l),y=L(S),f=b(S,"INPUT",{id:!0,class:!0,name:!0,type:!0,accept:!0,placeholder:!0}),d=L(S),F(n.$$.fragment,S),S.forEach(h),E=L(I),p=b(I,"DIV",{class:!0});var j=w(p);m=b(j,"LABEL",{class:!0});var H=w(m);o=b(H,"SPAN",{"data-svelte-h":!0}),k(o)!=="svelte-9difb2"&&(o.textContent=r),u=L(H),$=b(H,"INPUT",{type:!0,class:!0}),H.forEach(h),V=L(j),F(P.$$.fragment,j),j.forEach(h),q=L(I),D=b(I,"DIV",{"data-svelte-h":!0}),k(D)!=="svelte-1001f6s"&&(D.innerHTML=J),I.forEach(h),C.forEach(h),this.h()},h(){v(s,"for","avatar"),v(f,"id","avatar"),v(f,"class","base-input"),v(f,"name","avatar"),v(f,"type","file"),v(f,"accept","image/png,image/jpeg,image/gif"),v(f,"placeholder","Avatar"),v(e,"class","grid grid-flow-row gap-2"),v($,"type","text"),$.required=!0,v($,"class","input p-2"),v(m,"class","label"),v(p,"class","grid grid-flow-row gap-2"),v(a,"class","grid grid-flow-row gap-6")},m(i,C){N(i,t,C),g(t,a),g(a,e),g(e,s),g(e,y),g(e,f),g(e,d),R(n,e,null),g(a,E),g(a,p),g(p,m),g(m,o),g(m,u),g(m,$),Q($,c[3].username),g(p,V),R(P,p,null),g(a,q),g(a,D),U=!0,z||(K=[ct($,"input",c[5]),ft(c[2].call(null,t))],z=!0)},p(i,C){const I={};C&768&&(I.$$scope={dirty:C,ctx:i}),n.$set(I),C&8&&$.value!==i[3].username&&Q($,i[3].username);const S={};C&768&&(S.$$scope={dirty:C,ctx:i}),P.$set(S)},i(i){U||(T(n.$$.fragment,i),T(P.$$.fragment,i),U=!0)},o(i){M(n.$$.fragment,i),M(P.$$.fragment,i),U=!1},d(i){i&&h(t),G(n),G(P),z=!1,mt(K)}}}function wt(c){let t,a="Please log in";return{c(){t=x("p"),t.textContent=a},l(e){t=b(e,"P",{"data-svelte-h":!0}),k(t)!=="svelte-1njyisr"&&(t.textContent=a)},m(e,s){N(e,t,s)},p:O,i:O,o:O,d(e){e&&h(t)}}}function Pt(c){let t,a=(c[8]||"")+"",e;return{c(){t=x("span"),e=X(a),this.h()},l(s){t=b(s,"SPAN",{class:!0});var l=w(t);e=Y(l,a),l.forEach(h),this.h()},h(){v(t,"class","validation-message")},m(s,l){N(s,t,l),g(t,e)},p(s,l){l&256&&a!==(a=(s[8]||"")+"")&&_(e,a)},d(s){s&&h(t)}}}function At(c){let t,a=(c[8]||"")+"",e;return{c(){t=x("span"),e=X(a),this.h()},l(s){t=b(s,"SPAN",{class:!0});var l=w(t);e=Y(l,a),l.forEach(h),this.h()},h(){v(t,"class","validation-message")},m(s,l){N(s,t,l),g(t,e)},p(s,l){l&256&&a!==(a=(s[8]||"")+"")&&_(e,a)},d(s){s&&h(t)}}}function Lt(c){let t,a,e,s="Settings",l,y,f,d,n,E;t=new It({props:{description:"Change your user settings",title:"Settings"}});const p=[wt,St],m=[];function o(r,u){return r[1]===null?0:1}return d=o(c),n=m[d]=p[d](c),{c(){B(t.$$.fragment),a=A(),e=x("h1"),e.textContent=s,l=A(),y=x("div"),f=x("section"),n.c(),this.h()},l(r){const u=at("svelte-1ae5i2c",document.head);F(t.$$.fragment,u),u.forEach(h),a=L(r),e=b(r,"H1",{class:!0,"data-svelte-h":!0}),k(e)!=="svelte-1pzybri"&&(e.textContent=s),l=L(r),y=b(r,"DIV",{class:!0});var $=w(y);f=b($,"SECTION",{});var V=w(f);n.l(V),V.forEach(h),$.forEach(h),this.h()},h(){v(e,"class","my-4 text-4xl font-bold"),v(y,"class","card p-4")},m(r,u){R(t,document.head,null),N(r,a,u),N(r,e,u),N(r,l,u),N(r,y,u),g(y,f),m[d].m(f,null),E=!0},p(r,[u]){let $=d;d=o(r),d===$?m[d].p(r,u):(it(),M(m[$],1,1,()=>{m[$]=null}),st(),n=m[d],n?n.p(r,u):(n=m[d]=p[d](r),n.c()),T(n,1),n.m(f,null))},i(r){E||(T(t.$$.fragment,r),T(n),E=!0)},o(r){M(t.$$.fragment,r),M(n),E=!1},d(r){r&&(h(a),h(e),h(l),h(y)),G(t),m[d].d()}}}function Nt(c,t,a){let e,s,l=O,y=()=>(l(),l=dt(p,o=>a(3,s=o)),p);rt(c,Ct,o=>a(1,e=o)),c.$$.on_destroy.push(()=>l());const f=lt(),d=nt(),n=gt({avatar:ht($t().refine(o=>"name"in o&&"size"in o&&"type"in o)),username:vt().min(3).max(32)});let E,p;function m(){s.username=this.value,p.set(s)}return c.$$.update=()=>{if(c.$$.dirty&3&&e&&!p){const o=xt({initialValues:{username:e.username},extend:[bt({schema:n}),yt],onSubmit:r=>{console.log("submitted",r),d.mutation(pt,{user:Et(r,n),userId:e.id}).toPromise().then(u=>{u.error?(console.error(u.error.message),f.trigger({message:"Error editing user: "+u.error.message,background:"variant-filled-error",autohide:!1})):(f.trigger({message:"User updated",background:"variant-filled-success",timeout:5e3}),ot(ut+"/user/"+u.data.updateUser.id))})}});a(2,E=o.form),y(a(0,p=o.data))}},[p,e,E,s,n,m]}class jt extends Z{constructor(t){super(),tt(this,t,Nt,Lt,et,{userSchema:4})}get userSchema(){return this.$$.ctx[4]}}export{jt as component};
//# sourceMappingURL=25.BkrrEzJk.js.map
