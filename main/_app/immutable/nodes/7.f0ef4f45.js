import{S as nt,i as at,s as rt,bl as st,R as A,U as g,V as H,X as h,a as v,_ as x,t as p,c as D,b as d,d as w,a5 as y,aD as ot,aF as $t,a9 as lt,g as S,p as P,bm as it,u as J,I as _,v as M,w as j,J as E,Z as q,K as O,L,bn as B,aR as ft,bc as C,bo as K,aJ as ct,bp as ut,aW as V,bb as mt,P as dt,a4 as pt}from"../chunks/vendor.d823cc42.js";import{T as gt,a as ht}from"../chunks/forms.524f0aa9.js";import{i as xt,C as yt,j as wt,k as Tt}from"../chunks/graphql.22d32a05.js";function U(s,t,n){const e=s.slice();return e[19]=t[n],e[20]=t,e[21]=n,e}function vt(s){let t,n;return t=new it({props:{$$slots:{default:[Dt]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},l(e){h(t.$$.fragment,e)},m(e,r){x(t,e,r),n=!0},p(e,r){const a={};r&4194318&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){p(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function bt(s){let t,n,e=s[0].error.message+"",r;return{c(){t=J("h1"),n=_("Failed to load tags: "),r=_(e)},l(a){t=M(a,"H1",{});var l=j(t);n=E(l,"Failed to load tags: "),r=E(l,e),l.forEach(w)},m(a,l){v(a,t,l),q(t,n),q(t,r)},p(a,l){l&1&&e!==(e=a[0].error.message+"")&&O(r,e)},i:L,o:L,d(a){a&&w(t)}}}function Nt(s){let t,n;return{c(){t=J("h1"),n=_("Loading tags...")},l(e){t=M(e,"H1",{});var r=j(t);n=E(r,"Loading tags..."),r.forEach(w)},m(e,r){v(e,t,r),q(t,n)},p:L,i:L,o:L,d(e){e&&w(t)}}}function _t(s){let t=s[19].name+"",n;return{c(){n=_(t)},l(e){n=E(e,t)},m(e,r){v(e,n,r)},p(e,r){r&2&&t!==(t=e[19].name+"")&&O(n,t)},d(e){e&&w(n)}}}function Et(s){let t;return{c(){t=_("delete_forever")},l(n){t=E(n,"delete_forever")},m(n,e){v(n,t,e)},d(n){n&&w(t)}}}function Ft(s){let t,n;return t=new V({props:{class:"material-icons",$$slots:{default:[Et]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},l(e){h(t.$$.fragment,e)},m(e,r){x(t,e,r),n=!0},p(e,r){const a={};r&4194304&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){p(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function It(s){let t,n;function e(...r){return s[10](s[19],...r)}return t=new mt({props:{slot:"icon",$$slots:{default:[Ft]},$$scope:{ctx:s}}}),t.$on("click",e),{c(){g(t.$$.fragment)},l(r){h(t.$$.fragment,r)},m(r,a){x(t,r,a),n=!0},p(r,a){s=r;const l={};a&4194304&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(r){n||(d(t.$$.fragment,r),n=!0)},o(r){p(t.$$.fragment,r),n=!1},d(r){y(t,r)}}}function Lt(s){let t;return{c(){t=_("Human-Readable name of the tag that is shown in UI")},l(n){t=E(n,"Human-Readable name of the tag that is shown in UI")},m(n,e){v(n,t,e)},d(n){n&&w(t)}}}function Pt(s){let t,n;return t=new ht({props:{slot:"helper",$$slots:{default:[Lt]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},l(e){h(t.$$.fragment,e)},m(e,r){x(t,e,r),n=!0},p(e,r){const a={};r&4194304&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){p(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function At(s){let t,n,e=s[19],r;function a($){s[11]($,s[19])}const l=()=>s[12](t,e),o=()=>s[12](null,e);function i(){return s[13](s[19])}let c={label:"Tag-Name",$$slots:{helper:[Pt]},$$scope:{ctx:s}};return s[19].name!==void 0&&(c.value=s[19].name),t=new gt({props:c}),P.push(()=>dt(t,"value",a)),l(),t.$on("change",i),{c(){g(t.$$.fragment)},l($){h(t.$$.fragment,$)},m($,u){x(t,$,u),r=!0},p($,u){s=$,e!==s[19]&&(o(),e=s[19],l());const b={};u&4194304&&(b.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,b.value=s[19].name,pt(()=>n=!1)),t.$set(b)},i($){r||(d(t.$$.fragment,$),r=!0)},o($){p(t.$$.fragment,$),r=!1},d($){o(),y(t,$)}}}function Ht(s){let t,n,e,r;return t=new K({props:{$$slots:{icon:[It],default:[_t]},$$scope:{ctx:s}}}),e=new ut({props:{$$slots:{default:[At]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=A(),g(e.$$.fragment)},l(a){h(t.$$.fragment,a),n=H(a),h(e.$$.fragment,a)},m(a,l){x(t,a,l),v(a,n,l),x(e,a,l),r=!0},p(a,l){const o={};l&4194306&&(o.$$scope={dirty:l,ctx:a}),t.$set(o);const i={};l&4194314&&(i.$$scope={dirty:l,ctx:a}),e.$set(i)},i(a){r||(d(t.$$.fragment,a),d(e.$$.fragment,a),r=!0)},o(a){p(t.$$.fragment,a),p(e.$$.fragment,a),r=!1},d(a){y(t,a),a&&w(n),y(e,a)}}}function k(s){let t,n=s[19],e;const r=()=>s[14](t,n),a=()=>s[14](null,n);let l={$$slots:{default:[Ht]},$$scope:{ctx:s}};return t=new B({props:l}),r(),{c(){g(t.$$.fragment)},l(o){h(t.$$.fragment,o)},m(o,i){x(t,o,i),e=!0},p(o,i){n!==o[19]&&(a(),n=o[19],r());const c={};i&4194314&&(c.$$scope={dirty:i,ctx:o}),t.$set(c)},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){p(t.$$.fragment,o),e=!1},d(o){a(),y(t,o)}}}function qt(s){let t;return{c(){t=_("Add new tag")},l(n){t=E(n,"Add new tag")},m(n,e){v(n,t,e)},d(n){n&&w(t)}}}function Ot(s){let t;return{c(){t=_("add")},l(n){t=E(n,"add")},m(n,e){v(n,t,e)},d(n){n&&w(t)}}}function Rt(s){let t,n,e,r;return t=new C({props:{$$slots:{default:[qt]},$$scope:{ctx:s}}}),e=new V({props:{class:"material-icons",$$slots:{default:[Ot]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment),n=A(),g(e.$$.fragment)},l(a){h(t.$$.fragment,a),n=H(a),h(e.$$.fragment,a)},m(a,l){x(t,a,l),v(a,n,l),x(e,a,l),r=!0},p(a,l){const o={};l&4194304&&(o.$$scope={dirty:l,ctx:a}),t.$set(o);const i={};l&4194304&&(i.$$scope={dirty:l,ctx:a}),e.$set(i)},i(a){r||(d(t.$$.fragment,a),d(e.$$.fragment,a),r=!0)},o(a){p(t.$$.fragment,a),p(e.$$.fragment,a),r=!1},d(a){y(t,a),a&&w(n),y(e,a)}}}function Ut(s){let t,n;return t=new ct({props:{variant:"outlined",$$slots:{default:[Rt]},$$scope:{ctx:s}}}),t.$on("click",s[7]),{c(){g(t.$$.fragment)},l(e){h(t.$$.fragment,e)},m(e,r){x(t,e,r),n=!0},p(e,r){const a={};r&4194304&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){p(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function kt(s){let t,n;return t=new K({props:{ripple:!1,$$slots:{default:[Ut]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},l(e){h(t.$$.fragment,e)},m(e,r){x(t,e,r),n=!0},p(e,r){const a={};r&4194304&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){p(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Dt(s){let t,n,e,r=s[1],a=[];for(let o=0;o<r.length;o+=1)a[o]=k(U(s,r,o));const l=o=>p(a[o],1,1,()=>{a[o]=null});return n=new B({props:{nonInteractive:!0,$$slots:{default:[kt]},$$scope:{ctx:s}}}),{c(){for(let o=0;o<a.length;o+=1)a[o].c();t=A(),g(n.$$.fragment)},l(o){for(let i=0;i<a.length;i+=1)a[i].l(o);t=H(o),h(n.$$.fragment,o)},m(o,i){for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(o,i);v(o,t,i),x(n,o,i),e=!0},p(o,i){if(i&782){r=o[1];let $;for($=0;$<r.length;$+=1){const u=U(o,r,$);a[$]?(a[$].p(u,i),d(a[$],1)):(a[$]=k(u),a[$].c(),d(a[$],1),a[$].m(t.parentNode,t))}for(S(),$=r.length;$<a.length;$+=1)l($);D()}const c={};i&4194304&&(c.$$scope={dirty:i,ctx:o}),n.$set(c)},i(o){if(!e){for(let i=0;i<r.length;i+=1)d(a[i]);d(n.$$.fragment,o),e=!0}},o(o){a=a.filter(Boolean);for(let i=0;i<a.length;i+=1)p(a[i]);p(n.$$.fragment,o),e=!1},d(o){ft(a,o),o&&w(t),y(n,o)}}}function St(s){let t;return{c(){t=_(s[4])},l(n){t=E(n,s[4])},m(n,e){v(n,t,e)},p(n,e){e&16&&O(t,n[4])},d(n){n&&w(t)}}}function Jt(s){let t,n;return t=new C({props:{$$slots:{default:[St]},$$scope:{ctx:s}}}),{c(){g(t.$$.fragment)},l(e){h(t.$$.fragment,e)},m(e,r){x(t,e,r),n=!0},p(e,r){const a={};r&4194320&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){p(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function Mt(s){let t,n,e,r,a;const l=[Nt,bt,vt],o=[];function i($,u){return $[0].fetching?0:$[0].error?1:2}t=i(s),n=o[t]=l[t](s);let c={timeoutMs:4e3,$$slots:{default:[Jt]},$$scope:{ctx:s}};return r=new st({props:c}),s[15](r),{c(){n.c(),e=A(),g(r.$$.fragment)},l($){n.l($),e=H($),h(r.$$.fragment,$)},m($,u){o[t].m($,u),v($,e,u),x(r,$,u),a=!0},p($,[u]){let b=t;t=i($),t===b?o[t].p($,u):(S(),p(o[b],1,1,()=>{o[b]=null}),D(),n=o[t],n?n.p($,u):(n=o[t]=l[t]($),n.c()),d(n,1),n.m(e.parentNode,e));const I={};u&4194320&&(I.$$scope={dirty:u,ctx:$}),r.$set(I)},i($){a||(d(n),d(r.$$.fragment,$),a=!0)},o($){p(n),p(r.$$.fragment,$),a=!1},d($){o[t].d($),$&&w(e),s[15](null),y(r,$)}}}function jt(s,t,n){let e;const r=ot();let a=[];const l={},o={};let i="",c,$=-1;const u=$t({query:xt,client:r,variables:{}});lt(s,u,f=>n(0,e=f));function b(){if(a.find(f=>f.name=="New Tag"))l[a[a.length-1].id].setOpen(!0),o[a[a.length-1].id].focus();else{const f={id:$--,name:"New Tag"};a.push(f),n(1,a),n(0,e),setTimeout(()=>{l[f.id].setOpen(!0);const m=o[f.id];m.focus(),m.getElement().querySelectorAll("input")[0].select()},0)}}async function I(f){if(f.name=="New Tag")return;let m=!1;if(f.id<0){try{const N=await r.mutation(yt,{tagName:f.name}).toPromise();N.data&&(f.id=N.data.createTag.id,m=!0)}catch(N){console.log(N)}if(!m){n(4,i=`Failed to create Tag '${f.name}'!`),c.open(),setTimeout(()=>c.close(),2e3);return}}else{try{m=(await r.mutation(wt,{tagID:f.id,tagName:f.name}).toPromise()).data.updateTag!=null}catch{}if(!m){n(4,i=`Failed to update Tag '${f.name}'!`),c.open(),setTimeout(()=>c.close(),2e3);return}}n(4,i=`Tag '${f.name}' saved!`),c.open(),setTimeout(()=>c.close(),2e3)}async function W(f){if(f.name!="New Tag"){let T=!1;try{T=(await r.mutation(Tt,{tagID:f.id}).toPromise()).data.deleteTag}catch{T=!1}if(!T){n(4,i=`Failed to remove Tag '${f.name}'!`),c.open(),setTimeout(()=>c.close(),2e3);return}}const m=()=>{const T=l[f.id].getElement(),F=T.scrollHeight;T.classList.add("smui-accordion__panel--removed"),T.style.height=F+"px",requestAnimationFrame(()=>T.style.height="0px"),T.addEventListener("transitionend",tt=>{tt.propertyName=="height"&&(T.classList.remove("smui-accordion__panel--removed"),T.style.height="auto",n(1,a=a.filter(et=>et.id!=f.id)))})};let N=!1;for(const T in l){const F=l[T];F?.isOpen()&&(F.setOpen(!1),N||F.getElement().addEventListener("SMUIAccordionPanel:closed",()=>{m()},{once:!0}),N=!0)}N||m(),n(4,i=`Tag '${f.name}' removed!`),c.open(),setTimeout(()=>c.close(),2e3)}function R(f,m){f.stopPropagation(),W(m)}const X=(f,m)=>R(m,f);function Z(f,m){s.$$.not_equal(m.name,f)&&(m.name=f,n(1,a),n(0,e))}function z(f,m){P[f?"unshift":"push"](()=>{o[m.id]=f,n(3,o)})}const G=f=>I(f);function Q(f,m){P[f?"unshift":"push"](()=>{l[m.id]=f,n(2,l)})}function Y(f){P[f?"unshift":"push"](()=>{c=f,n(5,c)})}return s.$$.update=()=>{s.$$.dirty&1&&n(1,a=e.data?.getTags||[])},[e,a,l,o,i,c,u,b,I,R,X,Z,z,G,Q,Y]}class Vt extends nt{constructor(t){super(),at(this,t,jt,Mt,rt,{})}}export{Vt as component};
//# sourceMappingURL=7.f0ef4f45.js.map
