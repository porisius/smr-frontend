{"version":3,"file":"23.4e9f76f4.js","sources":["../../../../../../src/routes/new-guide/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { getContextClient } from '@urql/svelte';\n  import { NewGuideDocument } from '$lib/generated';\n  import Toast from '$lib/components/general/Toast.svelte';\n  import { goto } from '$app/navigation';\n  import GuideForm from '$lib/components/guides/GuideForm.svelte';\n  import type { GuideData } from '$lib/models/guides';\n  import { base } from '$app/paths';\n  import MetaDescriptors from '$lib/components/utils/MetaDescriptors.svelte';\n  import Card, { Content } from '@smui/card';\n\n  let errorMessage = '';\n  let errorToast = false;\n\n  const client = getContextClient();\n\n  const onSubmit = (data: GuideData) => {\n    client\n      .mutation(NewGuideDocument, {\n        guide: data\n      })\n      .toPromise()\n      .then((value) => {\n        if (value.error) {\n          console.error(value.error.message);\n          errorMessage = 'Error creating guide: ' + value.error.message;\n          errorToast = true;\n        } else {\n          // TODO Toast or something\n          goto(base + '/guide/' + value.data.createGuide.id);\n        }\n      });\n  };\n\n  $: if (!errorToast) {\n    errorMessage = '';\n  }\n</script>\n\n<svelte:head>\n  <MetaDescriptors description=\"Creating a new guide\" title=\"New guide\" />\n</svelte:head>\n\n<h1 class=\"text-4xl my-4 font-bold\">New Guide</h1>\n\n<Card>\n  <Content>\n    <GuideForm {onSubmit} />\n  </Content>\n</Card>\n\n<Toast bind:running={errorToast}>\n  <span>{errorMessage}</span>\n</Toast>\n"],"names":["ctx","insert_hydration","target","span","anchor","h1","errorMessage","errorToast","client","getContextClient","onSubmit","data","mutation","NewGuideDocument","guide","toPromise","then","value","error","console","message","$$invalidate","goto","base","createGuide","id"],"mappings":"8gCAoDSA,EAAY,CAAA,CAAA,0CAAZA,EAAY,CAAA,CAAA,sBAAnBC,CAAAA,EAA0BC,EAAAC,EAAAC,CAAAA,0BAAnBJ,EAAY,wQADAA,EAAU,CAAA,IAAA,mBAAVA,EAAU,8FARK,WAAA,sLAAA,WAAA,iKAApCC,EAAiDC,EAAAG,EAAAD,0LAQ5BJ,EAAU,qPAxCzB,IAAAM,EAAe,GACfC,EAAa,GAEX,MAAAC,EAASC,IAETC,EAAYC,GAChBH,CAAAA,EACGI,SAASC,EACR,CAAAC,MAAOH,CAERI,CAAAA,EAAAA,UAAAA,EACAC,KAAMC,GACD,CAAAA,EAAMC,OACRC,QAAQD,MAAMD,EAAMC,MAAME,OAC1BC,EAAAA,EAAA,EAAAf,EAAe,yBAA2BW,EAAMC,MAAME,SACtDC,EAAA,EAAAd,EAAa,KAGbe,EAAKC,EAAO,UAAYN,EAAMN,KAAKa,YAAYC,qBAsBpClB,EAAUU,gDAjBrBV,GACNc,EAAA,EAAAf,EAAe"}