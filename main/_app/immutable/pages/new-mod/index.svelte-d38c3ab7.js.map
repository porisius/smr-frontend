{"version":3,"file":"index.svelte-d38c3ab7.js","sources":["../../../../../../../src/routes/new-mod/index.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { mutation } from '@urql/svelte';\n  import { NewModDocument } from '$lib/generated';\n  import Toast from '$lib/components/general/Toast.svelte';\n  import { goto } from '$app/navigation';\n  import ModForm from '$lib/components/mods/ModForm.svelte';\n  import type { ModData } from '$lib/models/mods';\n  import { base } from '$app/paths';\n  import MetaDescriptors from '$lib/components/utils/MetaDescriptors.svelte';\n  import Card, { Content } from '@smui/card';\n\n  let errorMessage = '';\n  let errorToast = false;\n\n  const newMod = mutation({\n    query: NewModDocument\n  });\n\n  const onSubmit = (data: ModData) => {\n    newMod({\n      mod: data\n    }).then((value) => {\n      if (value.error) {\n        console.error(value.error.message);\n        errorMessage = 'Error creating mod: ' + value.error.message;\n        errorToast = true;\n      } else {\n        // TODO Toast or something\n        goto(base + '/mod/' + value.data.createMod.id);\n      }\n    });\n  };\n\n  $: if (!errorToast) {\n    errorMessage = '';\n  }\n</script>\n\n<svelte:head>\n  <MetaDescriptors description=\"Adding a new mod in the Satisfactory Mod Repository\" title=\"New mod\" />\n</svelte:head>\n\n<h1 class=\"text-4xl my-4 font-bold\">New Mod</h1>\n\n<Card>\n  <Content>\n    <ModForm {onSubmit} />\n  </Content>\n</Card>\n\n<Toast bind:running={errorToast}>\n  <span>{errorMessage}</span>\n</Toast>\n"],"names":["ctx","insert_hydration","target","span","anchor","h1","errorMessage","errorToast","newMod","mutation","query","NewModDocument","onSubmit","data","mod","then","value","error","console","message","$$invalidate","goto","base","createMod","id"],"mappings":"s6CAmDSA,EAAY,4CAAZA,EAAY,wBAAnBC,CAAAA,EAA0BC,EAAAC,EAAAC,CAAAA,0BAAnBJ,EAAY,EAAA,CAAA,iSADAA,GAAU,KAAA,mBAAVA,EAAU,8FARK,gNAAA,wKAApCC,EAAAA,EAA+CC,EAAAG,EAAAD,CAAAA,yLAQ1BJ,EAAU,oPAvCzB,CAAA,GAAAM,GAAe,GACfC,EAAa,GAEX,KAAAC,GAASC,EACb,CAAAC,MAAOC,CAAAA,CAAAA,EAGHC,EAAYC,IAChBL,GACEM,IAAKD,CAAAA,CAAAA,EACJE,KAAMC,GACH,CAAA,AAAAA,EAAMC,MACRC,SAAQD,MAAMD,EAAMC,MAAME,OAAAA,EAC1BC,EAAA,EAAAd,EAAe,uBAAyBU,EAAMC,MAAME,SACpDC,EAAA,EAAAb,EAAa,EAAA,GAGbc,EAAKC,EAAO,QAAUN,EAAMH,KAAKU,UAAUC,qBAsB9BjB,EAAUS,+CAjBrBT,IACNa,EAAA,EAAAd,EAAe,EAAA,EAAA"}