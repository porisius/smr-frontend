{"version":3,"file":"forms-1d9b5922.js","sources":["../../../../../../src/lib/utils/forms.ts"],"sourcesContent":["import type { ZodArray, ZodObject, ZodRawShape, ZodTypeAny } from 'zod';\nimport { ZodOptional, ZodEffects } from 'zod';\n\nexport const trimNonSchema = <T, K extends T>(data: K, schema: ZodObject<ZodRawShape>): T =>\n  Object.fromEntries(\n    Object.entries(data)\n      .map(([key, value]) => {\n        if (Object.keys(schema.shape).indexOf(key) >= 0) {\n          if (value !== undefined && value !== null && typeof value === 'object') {\n            let objSchema = schema.shape[key];\n            if (objSchema instanceof ZodOptional) {\n              objSchema = (objSchema as ZodOptional<ZodTypeAny>).unwrap();\n            }\n            if (objSchema instanceof ZodEffects) {\n              objSchema = (objSchema as ZodEffects<ZodTypeAny>).innerType();\n            }\n\n            if (Array.isArray(value)) {\n              const arrayType = (objSchema as ZodArray<ZodTypeAny>).element;\n              for (let i = 0; i < value.length; i++) {\n                if (typeof value[i] === 'object') {\n                  value[i] = trimNonSchema(value[i], arrayType as ZodObject<ZodRawShape>);\n                }\n              }\n            } else if (value.constructor.name !== 'File') {\n              value = trimNonSchema(value, objSchema as ZodObject<ZodRawShape>);\n            }\n          }\n\n          return [key, value];\n        }\n\n        return undefined;\n      })\n      .filter((val) => !!val)\n  ) as T;\n"],"names":["trimNonSchema","data","schema","Object","fromEntries","entries","map","key","value","keys","shape","indexOf","objSchema","ZodOptional","unwrap","ZodEffects","innerType","Array","isArray","arrayType","element","i","length","constructor","name","filter","val"],"mappings":"+CAGO,KAAMA,GAAgB,CAAiBC,EAASC,IACrDC,OAAOC,YACLD,OAAOE,QAAQJ,CACZK,EAAAA,IAAI,EAAEC,EAAKC,KAAAA,CACN,GAAAL,OAAOM,KAAKP,EAAOQ,KAAAA,EAAOC,QAAQJ,CAAAA,GAAQ,EAAG,CAC/C,GAAIC,AAAuBA,GAAU,YAAeA,IAAU,SAAU,CAClE,GAAAI,GAAYV,EAAOQ,MAAMH,GAQzB,GAPAK,YAAqBC,IACvBD,GAAaA,EAAsCE,OAAAA,GAEjDF,YAAqBG,IACvBH,GAAaA,EAAqCI,UAAAA,GAGhDC,MAAMC,QAAQV,GAAQ,CACxB,KAAMW,GAAaP,EAAmCQ,QACtD,OAASC,GAAI,EAAGA,EAAIb,EAAMc,OAAQD,IAC5B,AAAA,MAAOb,GAAMa,IAAO,UACtBb,GAAMa,GAAKrB,EAAcQ,EAAMa,GAAIF,CAAAA,EAAAA,KAG9B,AAAAX,GAAMe,YAAYC,OAAS,QAC5BhB,GAAAR,EAAcQ,EAAOI,CAAAA,EAAAA,CAI1B,MAAA,CAACL,EAAKC,GAGR,CAAA,EAERiB,OAAQC,GAAAA,CAAAA,CAAUA"}